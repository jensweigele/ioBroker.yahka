{"version":3,"file":"main.js","mappings":";;;;;;;;;AAAA,eAAe,kDAAwB;AACvC;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,wCAAwC;AACxC,sCAAsC;;AAEtC;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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","sources":["webpack:///../hap-nodejs-community-types/types.js","webpack:///./main.ts","webpack:///./shared/yahka.logger.ts","webpack:///./shared/yahka.utils.ts","webpack:///./yahka.community.types.ts","webpack:///./yahka.functions/conversion.base.ts","webpack:///./yahka.functions/conversion.homekit.homematic.ts","webpack:///./yahka.functions/conversion.inverse.ts","webpack:///./yahka.functions/conversion.invert.ts","webpack:///./yahka.functions/conversion.map.ts","webpack:///./yahka.functions/conversion.passthrough.ts","webpack:///./yahka.functions/conversion.round.ts","webpack:///./yahka.functions/conversion.scale.ts","webpack:///./yahka.functions/conversion.script.ts","webpack:///./yahka.functions/functions.base.ts","webpack:///./yahka.functions/functions.factory.ts","webpack:///./yahka.functions/functions.import.ts","webpack:///./yahka.functions/iofunc.base.ts","webpack:///./yahka.functions/iofunc.const.ts","webpack:///./yahka.functions/iofunc.homematic.covering.ts","webpack:///./yahka.functions/iofunc.homematic.dimmer.ts","webpack:///./yahka.functions/iofunc.multi-state.ts","webpack:///./yahka.functions/iofunc.state.ts","webpack:///./yahka.homekit-bridge.ts","webpack:///./yahka.homekit-ipcamera.ts","webpack:///./yahka.homekit-service.ts","webpack:///./yahka.ioBroker-adapter.ts","webpack:///external commonjs \"@iobroker/adapter-core\"","webpack:///external commonjs \"debug\"","webpack:///external commonjs \"hap-nodejs\"","webpack:///external commonjs \"util\"","webpack:///external node-commonjs \"child_process\"","webpack:///webpack/bootstrap","webpack:///webpack/runtime/node module decorator","webpack:///webpack/before-startup","webpack:///webpack/startup","webpack:///webpack/after-startup"],"sourcesContent":["var inherits = require('util').inherits;\nvar Service, Characteristic;\n\nmodule.exports = function(homebridge, options) {\n  Service = homebridge.hap.Service;\n  Characteristic = homebridge.hap.Characteristic;\n  UUID = homebridge.hap.uuid;\n\n  var CommunityTypes = {};\n\n  if (!options) options = {};\n\n\n  // Characteristics\n\n  CommunityTypes.Timestamp = function() {\n    Characteristic.call(this, \"Timestamp\", CommunityTypes.Timestamp.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.STRING,\n      perms: [ Characteristic.Perms.READ, Characteristic.Perms.WRITE, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.Timestamp.UUID = 'FF000001-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.Timestamp, Characteristic);\n\n  CommunityTypes.AudioDataURL = function() {\n    Characteristic.call(this, \"Audio URL\", CommunityTypes.AudioDataURL.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.STRING,\n      perms: [ Characteristic.Perms.READ, Characteristic.Perms.WRITE, Characteristic.Perms.NOTIFY ]\n    });\n  };\n  CommunityTypes.AudioDataURL.UUID = 'FF000002-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.AudioDataURL, Characteristic);\n\n  CommunityTypes.VideoDataURL = function() {\n    Characteristic.call(this, \"Video URL\", CommunityTypes.VideoDataURL.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.STRING,\n      perms: [ Characteristic.Perms.READ, Characteristic.Perms.WRITE, Characteristic.Perms.NOTIFY ]\n    });\n  };\n  CommunityTypes.VideoDataURL.UUID = 'FF000003-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.VideoDataURL, Characteristic);\n\n  CommunityTypes.AudioVolume = function() {\n    Characteristic.call(this, 'Audio Volume', CommunityTypes.AudioVolume.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT8,\n      unit: Characteristic.Units.PERCENTAGE,\n      maxValue: 100,\n      minValue: 0,\n      minStep: 1,\n      perms: [ Characteristic.Perms.READ, Characteristic.Perms.WRITE, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.AudioVolume.UUID = '00001001-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.AudioVolume, Characteristic);\n\n  CommunityTypes.Muting = function() {\n    Characteristic.call(this, 'Muting', CommunityTypes.Muting.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT8,\n      perms: [ Characteristic.Perms.READ, Characteristic.Perms.WRITE, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.Muting.UUID = '00001002-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.Muting, Characteristic);\n\n  CommunityTypes.PlaybackState = function() {\n    Characteristic.call(this, 'Playback State', CommunityTypes.PlaybackState.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT8,\n      perms: [ Characteristic.Perms.READ, Characteristic.Perms.WRITE, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.PlaybackState.UUID = '00002001-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.PlaybackState, Characteristic);\n  CommunityTypes.PlaybackState.PLAYING = 0;\n  CommunityTypes.PlaybackState.PAUSED = 1;\n  CommunityTypes.PlaybackState.STOPPED = 2;\n\n  CommunityTypes.SkipForward = function() {\n    Characteristic.call(this, 'Skip Forward', CommunityTypes.SkipForward.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.BOOL,\n      perms: [ Characteristic.Perms.WRITE ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.SkipForward.UUID = '00002002-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.SkipForward, Characteristic);\n\n  CommunityTypes.SkipBackward = function() {\n    Characteristic.call(this, 'Skip Backward', CommunityTypes.SkipBackward.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.BOOL,\n      perms: [ Characteristic.Perms.WRITE ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.SkipBackward.UUID = '00002003-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.SkipBackward, Characteristic);\n\n  CommunityTypes.ShuffleMode = function() {\n    Characteristic.call(this, 'Shuffle Mode', CommunityTypes.ShuffleMode.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT8,\n      perms: [ Characteristic.Perms.READ, Characteristic.Perms.WRITE, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.ShuffleMode.UUID = '00002004-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.ShuffleMode, Characteristic);\n  //NOTE: If GROUP or SET is not supported, accessories should coerce to ALBUM.\n  // If ALBUM is not supported, coerce to ITEM.\n  // In general, it is recommended for apps to only assume OFF, ITEM, and ALBUM\n  // are supported unless it is known that the accessory supports other settings.\n  CommunityTypes.ShuffleMode.OFF = 0;\n  //NOTE: INDIVIDUAL is deprecated.\n  CommunityTypes.ShuffleMode.ITEM = CommunityTypes.ShuffleMode.INDIVIDUAL = 1;\n  CommunityTypes.ShuffleMode.GROUP = 2; // e.g. iTunes \"Groupings\"\n  CommunityTypes.ShuffleMode.ALBUM = 3; // e.g. album or season\n  CommunityTypes.ShuffleMode.SET = 4; // e.g. T.V. Series or album box set\n\n  CommunityTypes.RepeatMode = function() {\n    Characteristic.call(this, 'Repeat Mode', CommunityTypes.RepeatMode.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT8,\n      perms: [ Characteristic.Perms.READ, Characteristic.Perms.WRITE, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.RepeatMode.UUID = '00002005-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.RepeatMode, Characteristic);\n  CommunityTypes.RepeatMode.OFF = 0;\n  CommunityTypes.RepeatMode.ONE = 1;\n  CommunityTypes.RepeatMode.ALL = 2;\n\n  CommunityTypes.PlaybackSpeed = function() {\n    Characteristic.call(this, 'Playback Speed', CommunityTypes.PlaybackSpeed.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.FLOAT,\n      perms: [ Characteristic.Perms.READ, Characteristic.Perms.WRITE, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.PlaybackSpeed.UUID = '00002006-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.PlaybackSpeed, Characteristic);\n\n  CommunityTypes.MediaCurrentPosition = function() {\n    Characteristic.call(this, 'Media Current Position', CommunityTypes.MediaCurrentPosition.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.FLOAT, // In seconds\n      perms: [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.MediaCurrentPosition.UUID = '00002007-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.MediaCurrentPosition, Characteristic);\n\n  CommunityTypes.MediaItemName = function() {\n    Characteristic.call(this, 'Media Name', CommunityTypes.MediaItemName.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.STRING,\n      perms: [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.MediaItemName.UUID = '00003001-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.MediaItemName, Characteristic);\n\n  CommunityTypes.MediaItemAlbumName = function() {\n    Characteristic.call(this, 'Media Album Name', CommunityTypes.MediaItemAlbumName.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.STRING,\n      perms: [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.MediaItemAlbumName.UUID = '00003002-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.MediaItemAlbumName, Characteristic);\n\n  CommunityTypes.MediaItemArtist = function() {\n    Characteristic.call(this, 'Media Artist', CommunityTypes.MediaItemArtist.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.STRING,\n      perms: [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.MediaItemArtist.UUID = '00003003-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.MediaItemArtist, Characteristic);\n\n  CommunityTypes.MediaItemDuration = function() {\n    Characteristic.call(this, 'Media Duration', CommunityTypes.MediaItemDuration.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.FLOAT, // In seconds\n      perms: [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.MediaItemDuration.UUID = '00003005-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.MediaItemDuration, Characteristic);\n\n  CommunityTypes.StillImage = function() {\n    Characteristic.call(this, 'Still Image', CommunityTypes.StillImage.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.DATA,\n      perms: [ Characteristic.Perms.READ, Characteristic.Perms.WRITE, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.StillImage.UUID = '00004001-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.StillImage, Characteristic);\n\n  // Also known as MIME type...\n  CommunityTypes.MediaTypeIdentifier = function() {\n    Characteristic.call(this, 'Media Type Identifier', CommunityTypes.MediaTypeIdentifier.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.STRING,\n      perms: [ Characteristic.Perms.READ, Characteristic.Perms.WRITE, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.MediaTypeIdentifier.UUID = '00004002-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.MediaTypeIdentifier, Characteristic);\n\n  CommunityTypes.MediaWidth = function() {\n    Characteristic.call(this, 'Media Width', CommunityTypes.MediaWidth.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT32,\n      perms: [ Characteristic.Perms.READ, Characteristic.Perms.WRITE, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.MediaWidth.UUID = '00004003-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.MediaWidth, Characteristic);\n\n  CommunityTypes.MediaHeight = function() {\n    Characteristic.call(this, 'Media Width', CommunityTypes.MediaHeight.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT32,\n      perms: [ Characteristic.Perms.READ, Characteristic.Perms.WRITE, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.MediaHeight.UUID = '00004004-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.MediaHeight, Characteristic);\n  \n\n// courtesy of https://gist.github.com/gomfunkel/b1a046d729757120907c\n\n  CommunityTypes.Volts = function() {\n    Characteristic.call(this, 'Volts', CommunityTypes.Volts.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT16,\n      unit:     \"V\",\n      minValue: 0,\n      maxValue: 65535,\n      minStep:  1,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.Volts.UUID = 'E863F10A-079E-48FF-8F27-9C2605A29F52';\n  inherits(CommunityTypes.Volts, Characteristic);\n\n  CommunityTypes.Amperes = function() {\n    Characteristic.call(this, 'Amps', CommunityTypes.Amperes.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT16,\n      unit:     \"A\",\n      minValue: 0,\n      maxValue: 65535,\n      minStep:  1,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.Amperes.UUID = 'E863F126-079E-48FF-8F27-9C2605A29F52';\n  inherits(CommunityTypes.Amperes, Characteristic);\n\n  CommunityTypes.Watts = function() {\n    Characteristic.call(this, 'Consumption', CommunityTypes.Watts.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT16,\n      unit:     \"W\",\n      minValue: 0,\n      maxValue: 65535,\n      minStep:  1,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.Watts.UUID = 'E863F10D-079E-48FF-8F27-9C2605A29F52';\n  inherits(CommunityTypes.Watts, Characteristic);\n\n  CommunityTypes.VoltAmperes = function() {\n    Characteristic.call(this, 'Apparent Power', CommunityTypes.VoltAmperes.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT16,\n      unit:     \"VA\",\n      minValue: 0,\n      maxValue: 65535,\n      minStep:  1,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.VoltAmperes.UUID = 'E863F110-079E-48FF-8F27-9C2605A29F52';\n  inherits(CommunityTypes.VoltAmperes, Characteristic);\n\n  CommunityTypes.KilowattHours = function() {\n    Characteristic.call(this, 'Total Consumption', CommunityTypes.KilowattHours.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT32,\n      unit:     \"kWh\",\n      minValue: 0,\n      maxValue: 65535,\n      minStep:  1,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.KilowattHours.UUID = 'E863F10C-079E-48FF-8F27-9C2605A29F52';\n  inherits(CommunityTypes.KilowattHours, Characteristic);\n\n  CommunityTypes.KilowattVoltAmpereHour = function() {\n    Characteristic.call(this, 'Apparent Energy', CommunityTypes.KilowattVoltAmpereHour.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT32,\n      unit:     \"kVAh\",\n      minValue: 0,\n      maxValue: 65535,\n      minStep:  1,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.KilowattVoltAmpereHour.UUID = 'E863F127-079E-48FF-8F27-9C2605A29F52';\n  inherits(CommunityTypes.KilowattVoltAmpereHour, Characteristic);\n\n  CommunityTypes.BatteryLevel = function() {\n    Characteristic.call(this, 'Battery Level', CommunityTypes.BatteryLevel.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT16,\n      unit: Characteristic.Units.PERCENTAGE,\n      maxValue: 100,\n      minValue: 0,\n      minStep: 1,\n      perms: [ Characteristic.Perms.READ ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.BatteryLevel.UUID = 'E863F11B-079E-48FF-8F27-9C2605A29F52';\n  inherits(CommunityTypes.BatteryLevel, Characteristic);\n\n  CommunityTypes.EveAirQuality = function () {\n    Characteristic.call(this, 'Eve Air Quality', CommunityTypes.EveAirQuality.UUID);\n    this.setProps({\n      format: Characteristic.Formats.UINT16,\n      unit: \"ppm\",\n      maxValue: 5000,\n      minValue: 0,\n      minStep: 1,\n      perms: [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ],\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.EveAirQuality.UUID = 'E863F10B-079E-48FF-8F27-9C2605A29F52';\n  inherits(CommunityTypes.EveAirQuality, Characteristic);\n\n\n// courtesy of https://github.com/ebaauw/homebridge-lib\n// i should probably submit a PR for everything here that isn't in that repo...\n\n  CommunityTypes.EveOpenDuration = function () {\n    Characteristic.call(this, 'Eve Open Duration', CommunityTypes.EveOpenDuration.UUID);\n    this.setProps({\n      format: Characteristic.Formats.UINT32,\n      unit: Characteristic.Units.SECONDS, // since last reset\n      perms: [Characteristic.Perms.READ, Characteristic.Perms.NOTIFY, Characteristic.Perms.WRITE]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.EveOpenDuration.UUID = 'E863F118-079E-48FF-8F27-9C2605A29F52';\n  inherits(CommunityTypes.EveOpenDuration, Characteristic);\n\n  CommunityTypes.EveClosedDuration = function () {\n    Characteristic.call(this, 'Eve Closed Duration', CommunityTypes.EveClosedDuration.UUID);\n    this.setProps({\n      format: Characteristic.Formats.UINT32,\n      unit: Characteristic.Units.SECONDS, // since last reset\n      perms: [Characteristic.Perms.READ, Characteristic.Perms.NOTIFY, Characteristic.Perms.WRITE]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.EveClosedDuration.UUID = 'E863F119-079E-48FF-8F27-9C2605A29F52';\n  inherits(CommunityTypes.EveClosedDuration, Characteristic);\n\n  CommunityTypes.EveLastActivation = function () {\n    Characteristic.call(this, 'Eve Last Activation', CommunityTypes.EveLastActivation.UUID);\n    this.setProps({\n      format: Characteristic.Formats.UINT32,\n      unit: Characteristic.Units.SECONDS, // since last reset\n      perms: [Characteristic.Perms.READ, Characteristic.Perms.NOTIFY]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.EveLastActivation.UUID = 'E863F11A-079E-48FF-8F27-9C2605A29F52';\n  inherits(CommunityTypes.EveLastActivation, Characteristic);\n\n  CommunityTypes.EveTimesOpened = function () {\n    Characteristic.call(this, 'Eve Times Opened', CommunityTypes.EveTimesOpened.UUID);\n    this.setProps({\n      format: Characteristic.Formats.UINT32,\n      perms: [Characteristic.Perms.READ, Characteristic.Perms.NOTIFY]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.EveTimesOpened.UUID = 'E863F129-079E-48FF-8F27-9C2605A29F52';\n  inherits(CommunityTypes.EveTimesOpened, Characteristic);\n\n  CommunityTypes.EveResetTotal = function () {\n    Characteristic.call(this, 'Eve Reset Total', CommunityTypes.EveResetTotal.UUID);\n    this.setProps({\n      format: Characteristic.Formats.UINT32,\n      unit: Characteristic.Units.SECONDS, // since 2001/01/01\n      perms: [Characteristic.Perms.READ, Characteristic.Perms.NOTIFY, Characteristic.Perms.WRITE]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.EveResetTotal.UUID = 'E863F112-079E-48FF-8F27-9C2605A29F52';\n  inherits(CommunityTypes.EveResetTotal, Characteristic);\n\n\n// courtesy of https://github.com/robi-van-kinobi/homebridge-cubesensors\n\n  CommunityTypes.AtmosphericPressureLevel = function () {\n    Characteristic.call(this, 'Barometric Pressure', CommunityTypes.AtmosphericPressureLevel.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT8,\n      unit:     \"mbar\",\n      minValue: 800,\n      maxValue: 1200,\n      minStep:  1,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.AtmosphericPressureLevel.UUID = '28FDA6BC-9C2A-4DEA-AAFD-B49DB6D155AB';\n  inherits(CommunityTypes.AtmosphericPressureLevel, Characteristic);\n\n  CommunityTypes.NoiseLevel = function () {\n    Characteristic.call(this, 'Noise Level', CommunityTypes.NoiseLevel.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT8,\n      unit:     \"dB\",\n      minValue: 0,\n      maxValue: 200,\n      minStep:  1,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.NoiseLevel.UUID = '2CD7B6FD-419A-4740-8995-E3BFE43735AB';\n  inherits(CommunityTypes.NoiseLevel, Characteristic);\n\n\n// courtesy of https://github.com/homespun/homebridge-platform-snmp\n\n  CommunityTypes.AirFlow = function () {\n    Characteristic.call(this, 'Air Flow', CommunityTypes.AirFlow.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT8,\n      unit:     \"m/s\",\n      minValue: 0,\n      maxValue: 135,\n      minStep:  1,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.AirFlow.UUID = '49C8AE5A-A3A5-41AB-BF1F-12D5654F9F41';\n  inherits(CommunityTypes.AirFlow, Characteristic);\n\n  CommunityTypes.NitrogenDioxideDetected = function () {\n    Characteristic.call(this, 'Nitrogen Dioxide Detected', CommunityTypes.NitrogenDioxideDetected.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT8,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.NitrogenDioxideDetected.UUID = 'D737B40A-3AF0-4316-950F-76090B98C5CF';\n  inherits(CommunityTypes.NitrogenDioxideDetected, Characteristic);\n\n  CommunityTypes.NitrogenDioxideDetected.NO2_LEVELS_NORMAL = 0;\n  CommunityTypes.NitrogenDioxideDetected.NO2_LEVELS_ABNORMAL = 1;\n\n  CommunityTypes.NitrogenDioxideLevel = function () {\n    Characteristic.call(this, 'Nitrogen Dioxide Level', CommunityTypes.NitrogenDioxideLevel.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.FLOAT,\n      unit:     \"ppm\",\n      minValue: 0,\n      maxValue: 1500,\n      minStep:  1,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.NitrogenDioxideLevel.UUID = 'B762A2AF-D9D0-4A79-814A-E9EBAB0ED290';\n  inherits(CommunityTypes.NitrogenDioxideLevel, Characteristic);\n\n  CommunityTypes.NitrogenDioxidePeakLevel = function () {\n    Characteristic.call(this, 'Nitrogen Dioxide Peak Level', CommunityTypes.NitrogenDioxidePeakLevel.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.FLOAT,\n      unit:     \"ppm\",\n      minValue: 0,\n      maxValue: 1500,\n      minStep:  1,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.NitrogenDioxidePeakLevel.UUID = 'B6594847-7B88-496C-A1A0-B7860F3D7601';\n  inherits(CommunityTypes.NitrogenDioxidePeakLevel, Characteristic);\n\n\n// courtesy of https://github.com/homespun/homebridge-platform-aqe\n\n  CommunityTypes.OzoneDetected = function () {\n    Characteristic.call(this, 'Ozone Detected', CommunityTypes.OzoneDetected.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT8,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.OzoneDetected.UUID = '0168FA60-5CF4-4314-AA45-0F84E389A093';\n  inherits(CommunityTypes.OzoneDetected, Characteristic);\n\n  CommunityTypes.OzoneDetected.O3_LEVELS_NORMAL = 0;\n  CommunityTypes.OzoneDetected.O3_LEVELS_ABNORMAL = 1;\n\n  CommunityTypes.OzoneLevel = function () {\n    Characteristic.call(this, 'Ozone Level', CommunityTypes.OzoneLevel.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.FLOAT,\n      unit:     \"ppb\",\n      minValue: 0,\n      maxValue: 1500,\n      minStep:  0.01,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.OzoneLevel.UUID = '03C17FD9-672E-42F5-8DD4-30C6822C739A';\n  inherits(CommunityTypes.OzoneLevel, Characteristic);\n\n  CommunityTypes.OzonePeakLevel = function () {\n    Characteristic.call(this, 'Ozone Peak Level', CommunityTypes.OzonePeakLevel.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.FLOAT,\n      unit:     \"ppb\",\n      minValue: 0,\n      maxValue: 1500,\n      minStep:  0.01,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.OzonePeakLevel.UUID = '550EE1FF-FC66-4BB6-A1C1-4B0A07109AE3';\n  inherits(CommunityTypes.OzonePeakLevel, Characteristic);\n\n  CommunityTypes.SodiumDioxideDetected = function () {\n    Characteristic.call(this, 'Sodium Dioxide Detected', CommunityTypes.SodiumDioxideDetected.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT8,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.SodiumDioxideDetected.UUID = '4D237DAB-1CB6-4D52-B446-4667F58F7D28';\n  inherits(CommunityTypes.SodiumDioxideDetected, Characteristic);\n\n  CommunityTypes.SodiumDioxideDetected.SO2_LEVELS_NORMAL = 0;\n  CommunityTypes.SodiumDioxideDetected.SO2_LEVELS_ABNORMAL = 1;\n\n  CommunityTypes.SodiumDioxideLevel = function () {\n    Characteristic.call(this, 'Sodium Dioxide Level', CommunityTypes.SodiumDioxideLevel.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.FLOAT,\n      unit:     \"ppb\",\n      minValue: 0,\n      maxValue: 1500,\n      minStep:  0.01,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.SodiumDioxideLevel.UUID = '66C4D315-FBEF-470E-9434-B047679F1141';\n  inherits(CommunityTypes.SodiumDioxideLevel, Characteristic);\n\n  CommunityTypes.SodiumDioxidePeakLevel = function () {\n    Characteristic.call(this, 'Sodium Dioxide Peak Level', CommunityTypes.SodiumDioxidePeakLevel.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.FLOAT,\n      unit:     \"ppb\",\n      minValue: 0,\n      maxValue: 1500,\n      minStep:  0.01,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.SodiumDioxidePeakLevel.UUID = '4CD6F648-2F92-43D8-86DF-0E8DE75E033B';\n  inherits(CommunityTypes.SodiumDioxidePeakLevel, Characteristic);\n\n  CommunityTypes.VolatileOrganicCompoundDetected = function () {\n    Characteristic.call(this, 'Volatile Organic Compound Detected', CommunityTypes.VolatileOrganicCompoundDetected.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT8,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.VolatileOrganicCompoundDetected.UUID = '65DBC0F5-C40B-4E04-ADED-DC70031B0B82';\n  inherits(CommunityTypes.VolatileOrganicCompoundDetected, Characteristic);\n\n  CommunityTypes.VolatileOrganicCompoundDetected.VOC_LEVELS_NORMAL = 0;\n  CommunityTypes.VolatileOrganicCompoundDetected.VOC_LEVELS_ABNORMAL = 1;\n\n  CommunityTypes.VolatileOrganicCompoundLevel = function () {\n    Characteristic.call(this, 'Volatile Organic Compound Level', CommunityTypes.VolatileOrganicCompoundLevel.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.FLOAT,\n      unit:     \"ppb\",\n      minValue: 0,\n      maxValue: 1500,\n      minStep:  0.01,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.VolatileOrganicCompoundLevel.UUID = '35C4C797-193D-4998-879F-A08514E87897';\n  inherits(CommunityTypes.VolatileOrganicCompoundLevel, Characteristic);\n\n  CommunityTypes.VolatileOrganicCompoundPeakLevel = function () {\n    Characteristic.call(this, 'Volatile Organic Compound Peak Level', CommunityTypes.VolatileOrganicCompoundPeakLevel.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.FLOAT,\n      unit:     \"ppb\",\n      minValue: 0,\n      maxValue: 1500,\n      minStep:  0.01,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.VolatileOrganicCompoundPeakLevel.UUID = 'A62CB784-1916-4BDF-B840-BDB9F8A264E9';\n  inherits(CommunityTypes.VolatileOrganicCompoundPeakLevel, Characteristic);\n\n  CommunityTypes.NotificationCode = function() {\n    Characteristic.call(this, 'Notification Code', CommunityTypes.NotificationCode.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT8,\n      maxValue: 255,\n      minValue: 0,\n      minStep: 1,\n      perms: [ Characteristic.Perms.READ, Characteristic.Perms.WRITE, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = 255;\n  };\n  CommunityTypes.NotificationCode.UUID = '381C47A3-CB06-4177-8E3D-A1B4C22EB031';\n  inherits(CommunityTypes.NotificationCode, Characteristic);\n\n  CommunityTypes.NotificationText = function() {\n    Characteristic.call(this, 'Notification Text', CommunityTypes.NotificationText.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.STRING,\n      perms: [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.NotificationText.UUID = 'e244ca80-813e-423a-86bd-02f293b857a0';\n  inherits(CommunityTypes.NotificationText, Characteristic);\n\n// used by Elgato Eve, number of seconds since the epoch...\n  CommunityTypes.LastEventTime = function() {\n    Characteristic.call(this, 'Last Event Time', CommunityTypes.LastEventTime.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT32,\n      perms: [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.LastEventTime.UUID = 'E863F11A-079E-48FF-8F27-9C2605A29F52';\n  inherits(CommunityTypes.LastEventTime, Characteristic);\n\n\n// courtesy of https://github.com/SeydX/homebridge-broadband\n\n  CommunityTypes.DownloadSpeed = function() {\n    Characteristic.call(this, 'Download Speed', CommunityTypes.DownloadSpeed.UUID);\n    this.setProps({\n      format: Characteristic.Formats.FLOAT,\n      unit: (options.units && options.units.DownloadSpeed) || 'Mbps',\n      maxValue: 1024,\n      minValue: 0,\n      minStep: 1,\n      perms: [Characteristic.Perms.READ, Characteristic.Perms.NOTIFY]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.DownloadSpeed.UUID = 'DA70DA1F-DA72-4DB3-81C2-99F158A15A9A';\n  inherits(CommunityTypes.DownloadSpeed, Characteristic);\n\n  CommunityTypes.UploadSpeed = function() {\n    Characteristic.call(this, 'Upload Speed', CommunityTypes.UploadSpeed.UUID);\n    this.setProps({\n      format: Characteristic.Formats.FLOAT,\n      unit: 'Mbps',\n      maxValue: 1024,\n      minValue: 0,\n      minStep: 1,\n      perms: [Characteristic.Perms.READ, Characteristic.Perms.NOTIFY]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.UploadSpeed.UUID = 'AB74289E-D516-4A12-B2AE-1B32A74C035F';\n  inherits(CommunityTypes.UploadSpeed, Characteristic);\n\n  CommunityTypes.Ping = function() {\n    Characteristic.call(this, 'Ping', CommunityTypes.Ping.UUID);\n    this.setProps({\n      format: Characteristic.Formats.INT,\n      unit: 'ms',\n      maxValue: 999,\n      minValue: 0,\n      minStep: 1,\n      perms: [Characteristic.Perms.READ, Characteristic.Perms.NOTIFY]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.Ping.UUID = 'CC65A09A-E052-410C-981D-C11BDE2C3F60';\n  inherits(CommunityTypes.Ping, Characteristic);\n\n  CommunityTypes.Latency = function() {\n    Characteristic.call(this, 'Latency', CommunityTypes.Latency.UUID);\n    this.setProps({\n      format: Characteristic.Formats.INT,\n      unit: 'ms',\n      maxValue: 999,\n      minValue: 0,\n      minStep: 0.001,\n      perms: [Characteristic.Perms.READ, Characteristic.Perms.NOTIFY]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.Latency.UUID = '60EC80F9-F799-4E8E-B613-098E7EBCBB0B';\n  inherits(CommunityTypes.Latency, Characteristic);\n\n\n// https://github.com/naofireblade/homebridge-weather-plus\n\n  CommunityTypes.DewPoint = function() {\n    Characteristic.call(this, 'Dew Point', CommunityTypes.DewPoint.UUID);\n    this.setProps({\n      format: Characteristic.Formats.FLOAT,\n      unit: Characteristic.Units.CELSIUS,\n      maxValue: 50,\n      minValue: -50,\n      minStep: 0.1,\n      perms: [Characteristic.Perms.READ, Characteristic.Perms.NOTIFY]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.DewPoint.UUID = '095c46e2-278e-4e3c-b9e7-364622a0f501';\n  inherits(CommunityTypes.DewPoint, Characteristic);\n\n\n  // Services\n\n  CommunityTypes.AudioDeviceService = function(displayName, subtype) {\n    Service.call(this, displayName, CommunityTypes.AudioDeviceService.UUID, subtype);\n\n    // Required Characteristics\n    this.addCharacteristic(CommunityTypes.AudioVolume);\n\n    // Optional Characteristics\n    this.addOptionalCharacteristic(CommunityTypes.Muting);\n    this.addOptionalCharacteristic(Characteristic.Name);\n  };\n  CommunityTypes.AudioDeviceService.UUID = '00000001-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.AudioDeviceService, Service);\n\n  CommunityTypes.PlaybackDeviceService = function(displayName, subtype) {\n    Service.call(this, displayName, CommunityTypes.PlaybackDeviceService.UUID, subtype);\n\n    // Required Characteristics\n    this.addCharacteristic(CommunityTypes.PlaybackState);\n\n    // Optional Characteristics\n    this.addOptionalCharacteristic(CommunityTypes.SkipForward);\n    this.addOptionalCharacteristic(CommunityTypes.SkipBackward);\n    this.addOptionalCharacteristic(CommunityTypes.ShuffleMode);\n    this.addOptionalCharacteristic(CommunityTypes.RepeatMode);\n    this.addOptionalCharacteristic(CommunityTypes.PlaybackSpeed);\n    this.addOptionalCharacteristic(CommunityTypes.MediaCurrentPosition);\n    this.addOptionalCharacteristic(CommunityTypes.MediaItemName);\n    this.addOptionalCharacteristic(CommunityTypes.MediaItemAlbumName);\n    this.addOptionalCharacteristic(CommunityTypes.MediaItemArtist);\n    this.addOptionalCharacteristic(CommunityTypes.MediaItemDuration);\n    this.addOptionalCharacteristic(Characteristic.Name);\n    // Artwork characteristics...would be better reported in a separate service?\n    this.addOptionalCharacteristic(CommunityTypes.StillImage);\n    this.addOptionalCharacteristic(CommunityTypes.MediaTypeIdentifier);\n    this.addOptionalCharacteristic(CommunityTypes.MediaWidth);\n    this.addOptionalCharacteristic(CommunityTypes.MediaHeight);\n  };\n  CommunityTypes.PlaybackDeviceService.UUID = '00000002-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.PlaybackDeviceService, Service);\n\n  // A media information service that has no playback controls, for e.g. DAB radio...\n  CommunityTypes.MediaInformationService = function(displayName, subtype) {\n    Service.call(this, displayName, CommunityTypes.MediaInformationService.UUID, subtype);\n\n    // Required Characteristics\n    this.addCharacteristic(CommunityTypes.MediaItemName);\n\n    // Optional Characteristics\n    this.addOptionalCharacteristic(CommunityTypes.MediaItemAlbumName);\n    this.addOptionalCharacteristic(CommunityTypes.MediaItemArtist);\n    this.addOptionalCharacteristic(CommunityTypes.MediaItemDuration);\n    this.addOptionalCharacteristic(CommunityTypes.MediaCurrentPosition);\n    this.addOptionalCharacteristic(Characteristic.Name);\n    // Artwork characteristics...would be better reported in a separate service?\n    this.addOptionalCharacteristic(CommunityTypes.StillImage);\n    this.addOptionalCharacteristic(CommunityTypes.MediaTypeIdentifier);\n    this.addOptionalCharacteristic(CommunityTypes.MediaWidth);\n    this.addOptionalCharacteristic(CommunityTypes.MediaHeight);\n  };\n  CommunityTypes.MediaInformationService.UUID = '00000003-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.MediaInformationService, Service);\n\n  CommunityTypes.StillImageService = function(displayName, subtype) {\n    Service.call(this, displayName, CommunityTypes.StillImageService.UUID, subtype);\n\n    // Required Characteristics\n    this.addCharacteristic(CommunityTypes.StillImage);\n    this.addCharacteristic(CommunityTypes.MediaTypeIdentifier);\n\n    // Optional Characteristics\n    this.addOptionalCharacteristic(CommunityTypes.MediaWidth);\n    this.addOptionalCharacteristic(CommunityTypes.MediaHeight);\n    this.addOptionalCharacteristic(Characteristic.Name);\n  };\n  CommunityTypes.StillImageService.UUID = '00000004-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.StillImageService, Service);\n\n  CommunityTypes.SecurityCameraService = function(displayName, subtype) {\n    Service.call(this, displayName, CommunityTypes.SecurityCameraService.UUID, subtype);\n\n    // Required Characteristics\n    this.addCharacteristic(CommunityTypes.StillImageService);\n    this.addCharacteristic(CommunityTypes.MediaTypeIdentifier);\n\n    // Optional Characteristics\n    this.addOptionalCharacteristic(CommunityTypes.Timestamp);\n    this.addOptionalCharacteristic(CommunityTypes.MediaWidth);\n    this.addOptionalCharacteristic(CommunityTypes.MediaHeight);\n    this.addOptionalCharacteristic(CommunityTypes.VideoDataURL);\n    this.addOptionalCharacteristic(CommunityTypes.AudioDataURL);\n    this.addOptionalCharacteristic(Characteristic.MotionDetected);\n    this.addOptionalCharacteristic(Characteristic.StatusTampered);\n    this.addOptionalCharacteristic(Characteristic.Name);\n  };\n  CommunityTypes.SecurityCameraService.UUID = '00000005-0000-1000-8000-135D67EC4377';\n  inherits(CommunityTypes.SecurityCameraService, Service);\n\n\n// courtesy of https://github.com/robi-van-kinobi/homebridge-cubesensors\n\n  CommunityTypes.AtmosphericPressureSensor = function (displayName, subtype) {\n    Service.call(this, displayName, CommunityTypes.AtmosphericPressureSensor.UUID, subtype);\n\n    // Required Characteristics\n    this.addCharacteristic(CommunityTypes.AtmosphericPressureLevel);\n\n    // Optional Characteristics\n    this.addOptionalCharacteristic(Characteristic.StatusActive);\n    this.addOptionalCharacteristic(Characteristic.StatusFault);\n    this.addOptionalCharacteristic(Characteristic.StatusLowBattery);\n    this.addOptionalCharacteristic(Characteristic.StatusTampered);\n    this.addOptionalCharacteristic(Characteristic.Name);\n  };\n  CommunityTypes.AtmosphericPressureSensor.UUID = 'B77831FD-D66A-46A4-B66D-FD7EE8DFE3CE';\n  inherits(CommunityTypes.AtmosphericPressureSensor, Service);\n\n  CommunityTypes.NoiseLevelSensor = function (displayName, subtype) {\n    Service.call(this, displayName, CommunityTypes.NoiseLevelSensor.UUID, subtype);\n\n    // Required Characteristics\n    this.addCharacteristic(CommunityTypes.NoiseLevel);\n\n    // Optional Characteristics\n    this.addOptionalCharacteristic(Characteristic.StatusActive);\n    this.addOptionalCharacteristic(Characteristic.StatusFault);\n    this.addOptionalCharacteristic(Characteristic.StatusLowBattery);\n    this.addOptionalCharacteristic(Characteristic.StatusTampered);\n    this.addOptionalCharacteristic(Characteristic.Name);\n  };\n  CommunityTypes.NoiseLevelSensor.UUID = '28FDA6BC-9C2A-4DEA-AAFD-B49DB6D155AB';\n  inherits(CommunityTypes.NoiseLevelSensor, Service);\n\n\n// courtesy of https://github.com/ToddGreenfield/homebridge-nut\n\n  CommunityTypes.InputVoltageAC = function() {\n    Characteristic.call(this, 'Input Voltage AC', CommunityTypes.InputVoltageAC.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.Float,\n      unit:     \"V\",\n      minValue: 0,\n      maxValue: 65535,\n      minStep:  0.01,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.InputVoltageAC.UUID = UUID.generate('CommunityTypes:usagedevice:InputVoltageAC');\n  inherits(CommunityTypes.InputVoltageAC, Characteristic);\n  \n  CommunityTypes.OutputVoltageAC = function() {\n    Characteristic.call(this, 'Output Voltage AC', CommunityTypes.OutputVoltageAC.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.Float,\n      unit:     \"V\",\n      minValue: 0,\n      maxValue: 65535,\n      minStep:  0.01,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.OutputVoltageAC.UUID = UUID.generate('CommunityTypes:usagedevice:OutputVoltageAC');\n  inherits(CommunityTypes.OutputVoltageAC, Characteristic);\n  \n  CommunityTypes.BatteryVoltageDC = function() {\n    Characteristic.call(this, 'Battery Voltage DC', CommunityTypes.BatteryVoltageDC.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.Float,\n      unit:     \"V\",\n      minValue: 0,\n      maxValue: 65535,\n      minStep:  0.01,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.BatteryVoltageDC.UUID = UUID.generate('CommunityTypes:usagedevice:BatteryVoltageDC');\n  inherits(CommunityTypes.BatteryVoltageDC, Characteristic);\n  \n  CommunityTypes.UPSLoadPercent = function() {\n    Characteristic.call(this, 'UPS Load', CommunityTypes.UPSLoadPercent.UUID);\n    this.setProps({\n      format:   Characteristic.Formats.UINT8,\n      unit: Characteristic.Units.PERCENTAGE,\n      minValue: 0,\n      maxValue: 100,\n      minStep:  1,\n      perms:    [ Characteristic.Perms.READ, Characteristic.Perms.NOTIFY ]\n    });\n    this.value = this.getDefaultValue();\n  };\n  CommunityTypes.UPSLoadPercent.UUID = UUID.generate('CommunityTypes:usagedevice:UPSLoadPercent');\n  inherits(CommunityTypes.UPSLoadPercent, Characteristic);\n\n\n// courtesy of https://github.com/homespun/homebridge-platform-snmp\n\n  CommunityTypes.AirFlowSensor = function (displayName, subtype) {\n    Service.call(this, displayName, CommunityTypes.AirFlowSensor.UUID, subtype);\n\n    // Required Characteristics\n    this.addCharacteristic(CommunityTypes.AirFlow);\n\n    // Optional Characteristics\n    this.addOptionalCharacteristic(Characteristic.StatusActive);\n    this.addOptionalCharacteristic(Characteristic.StatusFault);\n    this.addOptionalCharacteristic(Characteristic.StatusLowBattery);\n    this.addOptionalCharacteristic(Characteristic.StatusTampered);\n    this.addOptionalCharacteristic(Characteristic.Name);\n  };\n  CommunityTypes.AirFlowSensor.UUID = 'AF5C192E-420F-4A13-AB67-B8F3968A4935';\n  inherits(CommunityTypes.AirFlowSensor, Service);\n\n  CommunityTypes.NitrogenDioxideSensor = function (displayName, subtype) {\n    Service.call(this, displayName, CommunityTypes.NitrogenDioxideSensor.UUID, subtype);\n\n    // Required Characteristics\n    this.addCharacteristic(CommunityTypes.NitrogenDioxideDetected);\n\n    // Optional Characteristics\n    this.addOptionalCharacteristic(Characteristic.StatusActive);\n    this.addOptionalCharacteristic(Characteristic.StatusFault);\n    this.addOptionalCharacteristic(Characteristic.StatusLowBattery);\n    this.addOptionalCharacteristic(CommunityTypes.NitrogenDioxideLevel);\n    this.addOptionalCharacteristic(CommunityTypes.NitrogenDioxidePeakLevel);\n    this.addOptionalCharacteristic(Characteristic.StatusTampered);\n    this.addOptionalCharacteristic(Characteristic.Name);\n  };\n  CommunityTypes.NitrogenDioxideSensor.UUID = '9F6B797D-D43B-4C88-9AA0-57018AB8A91E';\n  inherits(CommunityTypes.NitrogenDioxideSensor, Service);\n\n\n// courtesy of https://github.com/homespun/homebridge-platform-aqe\n\n  CommunityTypes.OzoneSensor = function (displayName, subtype) {\n    Service.call(this, displayName, CommunityTypes.OzoneSensor.UUID, subtype);\n\n    // Required Characteristics\n    this.addCharacteristic(CommunityTypes.OzoneDetected);\n\n    // Optional Characteristics\n    this.addOptionalCharacteristic(Characteristic.StatusActive);\n    this.addOptionalCharacteristic(Characteristic.StatusFault);\n    this.addOptionalCharacteristic(Characteristic.StatusLowBattery);\n    this.addOptionalCharacteristic(CommunityTypes.OzoneLevel);\n    this.addOptionalCharacteristic(CommunityTypes.OzonePeakLevel);\n    this.addOptionalCharacteristic(Characteristic.StatusTampered);\n    this.addOptionalCharacteristic(Characteristic.Name);\n  };\n  CommunityTypes.OzoneSensor.UUID = 'B91C2BD6-D071-4F49-A23B-20721AC6CCEB';\n  inherits(CommunityTypes.OzoneSensor, Service);\n\n  CommunityTypes.SodiumDioxideSensor = function (displayName, subtype) {\n    Service.call(this, displayName, CommunityTypes.SodiumDioxideSensor.UUID, subtype);\n\n    // Required Characteristics\n    this.addCharacteristic(CommunityTypes.SodiumDioxideDetected);\n\n    // Optional Characteristics\n    this.addOptionalCharacteristic(Characteristic.StatusActive);\n    this.addOptionalCharacteristic(Characteristic.StatusFault);\n    this.addOptionalCharacteristic(Characteristic.StatusLowBattery);\n    this.addOptionalCharacteristic(CommunityTypes.SodiumDioxideLevel);\n    this.addOptionalCharacteristic(CommunityTypes.SodiumDioxidePeakLevel);\n    this.addOptionalCharacteristic(Characteristic.StatusTampered);\n    this.addOptionalCharacteristic(Characteristic.Name);\n  };\n  CommunityTypes.SodiumDioxideSensor.UUID = 'FE7CFB1F-12D0-405D-86FD-7E268D65C453';\n  inherits(CommunityTypes.SodiumDioxideSensor, Service);\n\n  CommunityTypes.VolatileOrganicCompoundSensor = function (displayName, subtype) {\n    Service.call(this, displayName, CommunityTypes.VolatileOrganicCompoundSensor.UUID, subtype);\n\n    // Required Characteristics\n    this.addCharacteristic(CommunityTypes.VolatileOrganicCompoundDetected);\n\n    // Optional Characteristics\n    this.addOptionalCharacteristic(Characteristic.StatusActive);\n    this.addOptionalCharacteristic(Characteristic.StatusFault);\n    this.addOptionalCharacteristic(Characteristic.StatusLowBattery);\n    this.addOptionalCharacteristic(CommunityTypes.VolatileOrganicCompoundLevel);\n    this.addOptionalCharacteristic(CommunityTypes.VolatileOrganicCompoundPeakLevel);\n    this.addOptionalCharacteristic(Characteristic.StatusTampered);\n    this.addOptionalCharacteristic(Characteristic.Name);\n  };\n  CommunityTypes.VolatileOrganicCompoundSensor.UUID = '776E34BC-1660-46EC-A33D-2DFE5B958699';\n  inherits(CommunityTypes.VolatileOrganicCompoundSensor, Service);\n\n  CommunityTypes.NotificationService = function (displayName, subtype) {\n    Service.call(this, displayName, CommunityTypes.NotificationService.UUID, subtype);\n\n    // Required Characteristics\n    this.addCharacteristic(CommunityTypes.NotificationCode);\n    this.addCharacteristic(CommunityTypes.NotificationText);\n\n    // Optional Characteristics\n    this.addOptionalCharacteristic(Characteristic.Name);\n    this.addOptionalCharacteristic(CommunityTypes.LastEventTime);\n  };\n  CommunityTypes.NotificationService.UUID = '074D8CE9-5B4B-48D5-9990-D98850C2F3FE';\n  inherits(CommunityTypes.NotificationService, Service);\n\n\n  return CommunityTypes;\n};\n","/**\n *\n * iobroker.yahka adapter\n *\n *\n *  file io-package.json comments:\n *\n *  {\n *      \"common\": {\n *          \"name\":         \"iobroker.yahka\",                  // name has to be set and has to be equal to adapters folder name and main file name excluding extension\n *          \"version\":      \"0.0.0\",                    // use \"Semantic Versioning\"! see http://semver.org/\n *          \"title\":        \"Node.js iobroker.yahka Adapter\",  // Adapter title shown in User Interfaces\n *          \"authors\":  [                               // Array of authord\n *              \"name <mail@iobroker.yahka.com>\"\n *          ]\n *          \"desc\":         \"iobroker.yahka adapter\",          // Adapter description shown in User Interfaces. Can be a language object {de:\"...\",ru:\"...\"} or a string\n *          \"platform\":     \"Javascript/Node.js\",       // possible values \"javascript\", \"javascript/Node.js\" - more coming\n *          \"mode\":         \"daemon\",                   // possible values \"daemon\", \"schedule\", \"subscribe\"\n *          \"schedule\":     \"0 0 * * *\"                 // cron-style schedule. Only needed if mode=schedule\n *          \"loglevel\":     \"info\"                      // Adapters Log Level\n *      },\n *      \"native\": {                                     // the native object is available via adapter.config in your adapters code - use it for configuration\n *          \"test1\": true,\n *          \"test2\": 42\n *      }\n *  }\n *\n */\n\n/* jshint -W097 */// jshint strict:false\n/*jslint node: true */\n\"use strict\";\nimport debug = require('debug');\ndebug.enable('EventedHTTPServer,HAPServer,Accessory,AccessoryLoader');\n\n// you have to require the utils module and call adapter function\nimport * as utils from '@iobroker/adapter-core';\nimport * as hkAdapter from './yahka.ioBroker-adapter';\nrequire(\"./yahka.functions/functions.import\");\n\nlet yahkaAdapter: hkAdapter.TIOBrokerAdapter;\nfunction startAdapter(options: any = {}) {\n\tconst ioAdapter = utils.Adapter({name: 'yahka', systemConfig: true});\n    yahkaAdapter = new hkAdapter.TIOBrokerAdapter(ioAdapter, utils.controllerDir);\n    return ioAdapter;\n}\n\n// ...\n\nif (module && module.parent) {\n\t// Export startAdapter in compact mode\n\tmodule.exports = startAdapter;\n} else {\n\t// Otherwise start the adapter immediately\n\tstartAdapter();\n}\n\n\n\n","import { ILogger } from \"../yahka.interfaces\";\n\nexport class YahkaLogger implements ILogger {\n    constructor(protected adapter: ioBroker.Adapter, private logIdentifier: string) {\n\n    }\n\n    public debug(message: string) {\n        return this.adapter.log.debug(\"[\" + this.logIdentifier + \"] \" + message);\n    }\n    public info(message: string) {\n        return this.adapter.log.info(\"[\" + this.logIdentifier + \"] \" + message);\n    }\n    public warn(message: string) {\n        return this.adapter.log.warn(\"[\" + this.logIdentifier + \"] \" + message);\n    }\n    public error(message: string) {\n        return this.adapter.log.error(\"[\" + this.logIdentifier + \"] \" + message);\n    }\n}\n","\nexport function propertyExists<T>(object: any, property: keyof T) {\n    return property in object;\n}","import { Characteristic, Formats, Units, Perms, Service, uuid } from 'hap-nodejs';\nimport * as HapCommunity from '../hap-nodejs-community-types';\n\nlet hapTypesImported = false;\nexport function importHAPCommunityTypesAndFixes() {\n\n    if (hapTypesImported)\n        return;\n\n    let fakeBridge = {\n        hap: {\n            Service: Service,\n            Characteristic: Characteristic,\n            uuid: uuid\n        }\n    }\n    let fakeOptions = {};\n    let communityTypes = HapCommunity(fakeBridge, fakeOptions);\n\n    for (let type in communityTypes) {\n        let typeFct: Function = communityTypes[type];\n        if (typeFct.length == 0) {  // characteristic\n            Characteristic[\"Community: \" + type] = typeFct;\n        } else if (typeFct.length == 2) { // service\n            Service[\"Community: \" + type] = typeFct;\n        }\n    }\n    hapTypesImported = true;\n}\n","import { TYahkaFunctionBase } from './functions.base';\nexport { IConversionFunction } from '../yahka.interfaces';\nexport abstract class TIOBrokerConversionBase extends TYahkaFunctionBase {\n    constructor(adapter: ioBroker.Adapter, logIdentifier: string = \"\") {\n        super(adapter, logIdentifier);\n    }\n\n    protected static castToNumber(value: any): number {\n        if (value === undefined)\n            return undefined;\n        else if (typeof value !== 'number')\n            return Number(value);\n        else\n            return value;\n    }\n\n    protected static castToBool(value: any): boolean {\n        return !!value;\n    }\n\n    protected static parameterValueByName(parameters: any, name: string): any {\n        let paramArray = undefined;\n        if (typeof parameters === 'object') {\n            paramArray = parameters\n        } else {\n            paramArray = JSON.parse(parameters);\n        }\n        if (paramArray === undefined)\n            return undefined;\n        return paramArray[name];\n    }\n}\n\n","import { TIOBrokerConversionBase, IConversionFunction } from \"./conversion.base\";\nimport { Characteristic } from \"hap-nodejs\";\n\n\nexport class TIoBrokerConversion_HomematicDirection_To_PositionState extends TIOBrokerConversionBase implements IConversionFunction {\n    toHomeKit(value: any) {\n        let num = TIOBrokerConversionBase.castToNumber(value)\n        let result = undefined;\n        switch (num) {\n            case 0:\n                result = Characteristic.PositionState.STOPPED;\n                break;\n            case 1:\n                result = Characteristic.PositionState.INCREASING;\n                break;\n            case 2:\n                result = Characteristic.PositionState.DECREASING;\n                break;\n            default:\n                result = Characteristic.PositionState.STOPPED;\n                break;\n        }\n        this.adapter.log.debug('HomematicDirectionToHomekitPositionState.toHomeKit, from ' + JSON.stringify(value) + '[' + (typeof value) + '] to ' + JSON.stringify(result));\n        return result;\n    }\n    toIOBroker(value: any) {\n        let num = TIOBrokerConversionBase.castToNumber(value)\n        let result = undefined;\n        switch (num) {\n            case Characteristic.PositionState.STOPPED:\n                result = 0;\n                break;\n            case Characteristic.PositionState.INCREASING:\n                result = 1;\n                break;\n            case Characteristic.PositionState.DECREASING:\n                result = 2;\n                break;\n            default:\n                result = 0;\n                break;\n        }\n        this.adapter.log.debug('HomematicDirectionToHomekitPositionState.toIOBroker, from ' + JSON.stringify(value) + '[' + (typeof value) + '] to ' + JSON.stringify(result));\n        return result;\n    }\n}\n\n\nexport class TIoBrokerConversion_HomematicControlMode_To_CoolingState extends TIOBrokerConversionBase implements IConversionFunction {\n    toHomeKit(value: any) {\n        let num = TIOBrokerConversionBase.castToNumber(value)\n\n        let result = undefined;\n        switch (num) {\n            case 0:\n                result = Characteristic.TargetHeatingCoolingState.AUTO;\n                break;\n            case 1:\n                result = Characteristic.TargetHeatingCoolingState.HEAT;\n                break;\n            case 2:\n                result = Characteristic.TargetHeatingCoolingState.HEAT;\n                break;\n            case 3:\n                result = Characteristic.TargetHeatingCoolingState.HEAT;\n                break;\n            default:\n                result = Characteristic.TargetHeatingCoolingState.OFF;\n                break;\n        }\n        this.adapter.log.debug('HomematicDirectionToHomekitHeatingCoolingState.toHomeKit, from ' + JSON.stringify(value) + '[' + (typeof value) + '] to ' + JSON.stringify(result));\n        return result;\n    }\n    toIOBroker(value) {\n        let num = TIOBrokerConversionBase.castToNumber(value)\n\n        let result = undefined;\n        switch (num) {\n            case Characteristic.TargetHeatingCoolingState.OFF:\n                result = 0;\n                break;\n            case Characteristic.TargetHeatingCoolingState.HEAT:\n                result = 1;\n                break;\n            case Characteristic.TargetHeatingCoolingState.COOL:\n                result = 0;\n                break;\n            case Characteristic.TargetHeatingCoolingState.AUTO:\n                result = 0;\n                break;\n            default:\n                result = 0;\n                break;\n        }\n        this.adapter.log.debug('HomematicDirectionToHomekitHeatingCoolingState.toIOBroker, from ' + JSON.stringify(value) + '[' + (typeof value) + '] to ' + JSON.stringify(result));\n        return result;\n    }\n}\n","import { TIOBrokerConversionBase, IConversionFunction } from \"./conversion.base\";\n\n\nexport class TIoBrokerConversion_Inverse extends TIOBrokerConversionBase implements IConversionFunction {\n\n\n    static create(adapter: ioBroker.Adapter, parameters: any): IConversionFunction {\n        let maxValue = TIOBrokerConversionBase.castToNumber(parameters);\n        return new TIoBrokerConversion_Inverse(adapter, maxValue);\n    }\n    constructor(adapter: ioBroker.Adapter, protected maxValue: number) {\n        super(adapter);\n    }\n\n    toHomeKit(value: any) {\n        let num: number = TIOBrokerConversionBase.castToNumber(value)\n        let newValue = this.maxValue - num;\n        this.adapter.log.debug('inverse: converting value to homekit: ' + value + ' to ' + newValue);\n        return newValue;\n    }\n    toIOBroker(value: any) {\n        let num: number = TIOBrokerConversionBase.castToNumber(value)\n        let newValue = this.maxValue - num;\n        this.adapter.log.debug('inverse: converting value to ioBroker: ' + value + ' to ' + newValue);\n        return newValue;\n    }\n}","import { TIOBrokerConversionBase, IConversionFunction } from \"./conversion.base\";\n\nexport class TIoBrokerConversion_Invert extends TIOBrokerConversionBase implements IConversionFunction {\n    public toHomeKit(value: any): boolean {\n        return !TIOBrokerConversionBase.castToBool(value);\n    }\n\n    public toIOBroker(value: any): boolean {\n        return !TIOBrokerConversionBase.castToBool(value);\n    }\n}\n\n","import { TIOBrokerConversionBase, IConversionFunction } from \"./conversion.base\";\n\nexport interface IIoBrokerConversion_MapEntry {\n    left: any;\n    right: any;\n}\nexport interface IIoBrokerConversion_Map_Parameters {\n    mappings: IIoBrokerConversion_MapEntry[];\n}\nexport function isMultiStateParameter(params: any): params is IIoBrokerConversion_Map_Parameters {\n    return \"mappings\" in params;\n}\n\nexport class TIoBrokerConversion_Map extends TIOBrokerConversionBase implements IConversionFunction {\n    protected mappingArrayToHomeKit = new Map<string, any>();\n    protected mappingArrayToIOBroker = new Map<string, any>();\n    private jsonReplacer = (key, value) => String(value);\n\n    static create(adapter: ioBroker.Adapter, parameters: any): IConversionFunction {\n        if (!isMultiStateParameter(parameters)) {\n            return undefined;\n        }\n\n        return new TIoBrokerConversion_Map(adapter, parameters);\n    }\n\n    constructor(adapter: ioBroker.Adapter, protected parameters: IIoBrokerConversion_Map_Parameters) {\n        super(adapter, \"TIoBrokerConversion_Map\");\n        this.buildMappingArray();\n    }\n\n    buildMappingArray() {\n        for(let mapDef of this.parameters.mappings) {\n            let leftStr = JSON.stringify(mapDef.left, this.jsonReplacer);\n            let rightStr = JSON.stringify(mapDef.right, this.jsonReplacer);\n            \n            this.mappingArrayToHomeKit.set(leftStr, mapDef.right);\n            this.mappingArrayToIOBroker.set(rightStr, mapDef.left);\n        }\n    }\n\n    toHomeKit(value: any) {\n        let ioValueStr = JSON.stringify(value, this.jsonReplacer);\n        return this.mappingArrayToHomeKit.get(ioValueStr);\n    }\n    toIOBroker(value: any) {\n        let hkValueStr = JSON.stringify(value, this.jsonReplacer);\n        return this.mappingArrayToIOBroker.get(hkValueStr);\n    }\n}","import { IConversionFunction } from \"../yahka.interfaces\";\nimport { TIOBrokerConversionBase } from \"./conversion.base\";\n\nexport class TIoBrokerConversion_Passthrough extends TIOBrokerConversionBase implements IConversionFunction {\n    toHomeKit(value: any) {\n        return value\n    }\n    toIOBroker(value: any) {\n        return value\n    }\n}","import { TIOBrokerConversionBase, IConversionFunction } from \"./conversion.base\";\n\nexport class TIoBrokerConversion_Round extends TIOBrokerConversionBase implements IConversionFunction {\n    public toHomeKit(value: any): number {\n        let num: number = TIOBrokerConversionBase.castToNumber(value);\n        return Math.round(num);\n    }\n\n    public toIOBroker(value: any): number {\n        let num: number = TIOBrokerConversionBase.castToNumber(value);\n        return Math.round(num);\n    }\n}\n\n","import { TIOBrokerConversionBase, IConversionFunction } from \"./conversion.base\";\n\nexport interface IIoBrokerConversionScaleParameters {\n    \"homekit.min\": number;\n    \"homekit.max\": number;\n    \"iobroker.min\": number;\n    \"iobroker.max\": number;\n}\n\nexport class TIoBrokerConversion_Scale extends TIOBrokerConversionBase implements IConversionFunction {\n    static isScaleParameter(parameters: any): parameters is IIoBrokerConversionScaleParameters {\n        const castedParam = <IIoBrokerConversionScaleParameters>parameters;\n        return castedParam[\"homekit.min\"] !== undefined &&\n            castedParam[\"homekit.max\"] !== undefined &&\n            castedParam[\"iobroker.min\"] !== undefined &&\n            castedParam[\"iobroker.max\"] !== undefined;\n    }\n\n    constructor(adapter: ioBroker.Adapter, protected parameters: IIoBrokerConversionScaleParameters, protected logName: string) {\n        super(adapter);\n        if (!TIoBrokerConversion_Scale.isScaleParameter(parameters)) {\n            this.parameters = {\n                \"homekit.min\": 0,\n                \"homekit.max\": 1,\n                \"iobroker.min\": 0,\n                \"iobroker.max\": 1\n            }\n        }\n    }\n\n    public toHomeKit(value: any): number {\n        let num: number = TIOBrokerConversionBase.castToNumber(value);\n        let homeKitMax = this.parameters[\"homekit.max\"];\n        let ioBrokerMax = this.parameters[\"iobroker.max\"];\n        let homeKitMin = this.parameters[\"homekit.min\"];\n        let ioBrokerMin = this.parameters[\"iobroker.min\"];\n        let newValue = ((num - ioBrokerMin) / (ioBrokerMax - ioBrokerMin)) * (homeKitMax - homeKitMin) + homeKitMin;\n        this.adapter.log.debug(`${this.logName}: converting value to homekit: ${value} to ${newValue}`);\n        return newValue;\n    }\n\n    public toIOBroker(value: any): number {\n        let num: number = TIOBrokerConversionBase.castToNumber(value);\n        let homeKitMax = this.parameters[\"homekit.max\"];\n        let ioBrokerMax = this.parameters[\"iobroker.max\"];\n        let homeKitMin = this.parameters[\"homekit.min\"];\n        let ioBrokerMin = this.parameters[\"iobroker.min\"];\n        let newValue = ((num - homeKitMin) / (homeKitMax - homeKitMin)) * (ioBrokerMax - ioBrokerMin) + ioBrokerMin;\n        this.adapter.log.debug(`${this.logName}: converting value to ioBroker: ${value} to ${newValue}`);\n        return newValue;\n    }\n}\n\nexport class TIoBrokerConversion_Scale_Rounded extends TIoBrokerConversion_Scale {\n\n    public toHomeKit(value: any): number {\n        return Math.round(super.toHomeKit(value));\n    }\n\n    public toIOBroker(value: any): number {\n        return Math.round(super.toIOBroker(value));\n    }\n}\n","import { TIOBrokerConversionBase, IConversionFunction } from \"./conversion.base\";\n\n\nexport interface IIoBrokerConversionScriptParameters {\n    toHomeKit: string;\n    toIOBroker: string;\n}\n\nexport class TIoBrokerConversion_Script extends TIOBrokerConversionBase implements IConversionFunction {\n    static isScriptParameter(parameters: any): parameters is IIoBrokerConversionScriptParameters {\n        const castedParam = <IIoBrokerConversionScriptParameters>parameters;\n        return castedParam[\"toHomeKit\"] !== undefined &&\n            castedParam[\"toIOBroker\"] !== undefined;\n    }\n\n    static create(adapter: ioBroker.Adapter, parameters: any): IConversionFunction {\n        let params: IIoBrokerConversionScriptParameters;\n        if (TIoBrokerConversion_Script.isScriptParameter(parameters)) {\n            params = parameters;\n        } else {\n            params = {\n                toHomeKit: \"return value\",\n                toIOBroker: \"return value\"\n            }\n        }\n        return new TIoBrokerConversion_Script(adapter, params);\n    }\n\n    private toHKFunction: Function;\n    private toIOFunction: Function;\n\n    constructor(adapter: ioBroker.Adapter, protected parameters: IIoBrokerConversionScriptParameters) {\n        super(adapter);\n        this.toHKFunction = new Function(\"value\", this.parameters.toHomeKit);\n        this.toIOFunction = new Function(\"value\", this.parameters.toIOBroker);\n    }\n    \n    toHomeKit(value: any) { \n        let newValue = this.toHKFunction(value);\n        this.adapter.log.debug('script: converting value to homekit: ' + value + ' to ' + newValue); \n        return newValue; \n    }\n    toIOBroker(value: any) { \n        let newValue = this.toIOFunction(value);\n        this.adapter.log.debug('script: converting value to ioBroker: ' + value + ' to ' + newValue); \n        return newValue; \n    }\n}","import { IInOutFunction, IInOutChangeNotify, ILogger } from \"../yahka.interfaces\";\nimport { ISubscriptionRequestor, ISubscriptionRequest } from \"../yahka.ioBroker-adapter\";\nimport { YahkaLogger } from \"../shared/yahka.logger\";\n\nexport abstract class TYahkaFunctionBase implements ISubscriptionRequestor {\n    public subscriptionRequests: ISubscriptionRequest[] = [];\n    protected stateCache = new Map<string, ioBroker.State>();\n    protected log: ILogger;\n\n    constructor(protected adapter: ioBroker.Adapter, private logIdentifier: string = \"\") {\n        this.log = new YahkaLogger(this.adapter, this.logIdentifier);\n    }\n\n    protected addSubscriptionRequest(stateName: string) {\n        let subscriptionEvent = this.subscriptionEvent.bind(this, stateName);\n        this.subscriptionRequests.push({\n            subscriptionType: 'state',\n            subscriptionIdentifier: stateName,\n            subscriptionEvent: subscriptionEvent\n        });\n    }\n\n    protected shouldStateBeFiltered(stateName: string, ioState: ioBroker.State): boolean {\n        return false;\n    }\n\n    protected readValueFromCache(stateName: string): ioBroker.State {\n        if (this.stateCache.has(stateName)) {\n            return this.stateCache.get(stateName);\n        } else {\n            return undefined;\n        }\n    }\n\n    private updateCache(stateName: string, ioState: ioBroker.State): boolean {\n        let needUpdate = false;\n        if (this.stateCache.has(stateName)) {\n            let curVal = this.stateCache.get(stateName);\n            needUpdate = curVal?.val !== ioState?.val;\n        } else {\n            needUpdate = true;\n        }\n\n        if (needUpdate)\n            this.stateCache.set(stateName, ioState);\n        return needUpdate;\n    }\n    subscriptionEvent(stateName: string, ioState: ioBroker.State, callback: IInOutChangeNotify) {\n        this.log.debug('change event from ioBroker via [' + stateName + ']' + JSON.stringify(ioState));\n        if (this.shouldStateBeFiltered(stateName, ioState)) {\n            this.log.debug('state was filtered - notification is canceled');\n            return;\n        }\n\n        let cacheChange = this.updateCache(stateName, ioState);\n        if (!cacheChange) {\n            this.log.debug('state value already in cache - notification is canceled');\n            return;\n        }\n\n        this.cacheChanged(stateName, callback);\n\n    }\n\n    protected cacheChanged(stateName: string, callback: IInOutChangeNotify) {\n\n    }\n\n\n\n}\n\n","import { IInOutFunction } from './iofunc.base';\nimport { IConversionFunction } from './conversion.base';\ninterface IObjectDictionary<T> {\n    [name: string]: T;\n}\n\ntype FactoryFunction<T> = (adapter: ioBroker.Adapter, parameters: any) => T;\n\nexport var inOutFactory: IObjectDictionary<FactoryFunction<IInOutFunction>> = {};\nexport var conversionFactory: IObjectDictionary<FactoryFunction<IConversionFunction>> = {};\n\nexport var functionFactory = {\n    createInOutFunction: function (adapter: ioBroker.Adapter, inOutFunction: string, inOutParameters?: any): IInOutFunction {\n        if (!(inOutFunction in inOutFactory))\n            return inOutFactory[\"const\"](adapter, inOutParameters);\n        return inOutFactory[inOutFunction](adapter, inOutParameters);\n    },\n    createConversionFunction: function (adapter: ioBroker.Adapter, conversionFunction: string, conversionParameters?: any): IConversionFunction {\n        if (!(conversionFunction in conversionFactory))\n            return conversionFactory[\"passthrough\"](adapter, conversionParameters);\n        return conversionFactory[conversionFunction](adapter, conversionParameters);\n    }\n};\n\n","import { inOutFactory, conversionFactory } from './functions.factory';\nimport { TIoBrokerInOutFunction_State, TIoBrokerInOutFunction_StateDeferred, TIoBrokerInOutFunction_State_OnlyACK } from \"./iofunc.state\";\nimport { TIoBrokerInOutFunction_Const } from './iofunc.const';\nimport { TIoBrokerInOutFunction_HomematicWindowCovering_TargetPosition } from './iofunc.homematic.covering';\nimport { TIoBrokerConversion_Passthrough } from './conversion.passthrough';\nimport { TIoBrokerConversion_HomematicControlMode_To_CoolingState, TIoBrokerConversion_HomematicDirection_To_PositionState } from './conversion.homekit.homematic';\nimport { TIoBrokerConversion_Scale, TIoBrokerConversion_Scale_Rounded } from './conversion.scale';\nimport { TIoBrokerConversion_Inverse } from './conversion.inverse';\nimport { TIoBrokerConversion_Script } from './conversion.script';\nimport { TIoBrokerInOutFunction_MultiState } from './iofunc.multi-state';\nimport { TIoBrokerConversion_Map } from './conversion.map';\nimport { TIoBrokerInOutFunction_Homematic_Dimmer_On, TIoBrokerInOutFunction_Homematic_Dimmer_Brightness } from './iofunc.homematic.dimmer';\nimport { TIoBrokerConversion_Round } from './conversion.round';\nimport { TIoBrokerConversion_Invert } from './conversion.invert';\n\ninOutFactory[\"ioBroker.State\"] = TIoBrokerInOutFunction_State.create;\ninOutFactory[\"ioBroker.MultiState\"] = TIoBrokerInOutFunction_MultiState.create;\ninOutFactory[\"ioBroker.State.Defered\"] = TIoBrokerInOutFunction_StateDeferred.create;\ninOutFactory[\"ioBroker.State.OnlyACK\"] = TIoBrokerInOutFunction_State_OnlyACK.create;\ninOutFactory[\"const\"] = TIoBrokerInOutFunction_Const.create;\ninOutFactory[\"ioBroker.homematic.WindowCovering.TargetPosition\"] = TIoBrokerInOutFunction_HomematicWindowCovering_TargetPosition.create;\ninOutFactory[\"ioBroker.homematic.Dimmer.On\"] = TIoBrokerInOutFunction_Homematic_Dimmer_On.create;\ninOutFactory[\"ioBroker.homematic.Dimmer.Brightness\"] = TIoBrokerInOutFunction_Homematic_Dimmer_Brightness.create;\n\nconversionFactory[\"passthrough\"] = (adapter, param) => new TIoBrokerConversion_Passthrough(adapter);\nconversionFactory[\"HomematicDirectionToHomekitPositionState\"] = (adapter, param) => new TIoBrokerConversion_HomematicDirection_To_PositionState(adapter);\nconversionFactory[\"HomematicControlModeToHomekitHeathingCoolingState\"] = (adapter, param) => new TIoBrokerConversion_HomematicControlMode_To_CoolingState(adapter);\nconversionFactory[\"level255\"] = (adapter, param) => new TIoBrokerConversion_Scale(adapter, {\n    \"homekit.min\": 0,\n    \"homekit.max\": 100,\n    \"iobroker.min\": 0,\n    \"iobroker.max\": 255\n}, 'level255');\nconversionFactory[\"scaleInt\"] = (adapter, param) => new TIoBrokerConversion_Scale_Rounded(adapter, param, 'scaleInt');\nconversionFactory[\"scaleFloat\"] = (adapter, param) => new TIoBrokerConversion_Scale(adapter, param, 'scaleFloat');\nconversionFactory[\"hue\"] = (adapter, param) => new TIoBrokerConversion_Scale(adapter, {\n    \"homekit.min\": 0,\n    \"homekit.max\": 360,\n    \"iobroker.min\": 0,\n    \"iobroker.max\": 65535\n}, 'hue');\nconversionFactory[\"inverse\"] = TIoBrokerConversion_Inverse.create;\nconversionFactory[\"script\"] = (adapter, param) => new TIoBrokerConversion_Script(adapter, param);\n\nconversionFactory[\"map\"] = TIoBrokerConversion_Map.create;\nconversionFactory[\"round\"] = (adapter, _param) => new TIoBrokerConversion_Round(adapter);\nconversionFactory[\"invert\"] = (adapter, _param) => new TIoBrokerConversion_Invert(adapter);\n","import { TYahkaFunctionBase } from './functions.base';\nimport { IInOutFunction, IInOutChangeNotify } from '../yahka.interfaces';\nimport { ISubscriptionRequest, ISubscriptionRequestor } from '../yahka.ioBroker-adapter';\nexport { IInOutChangeNotify, IInOutFunction } from '../yahka.interfaces';\n\nexport abstract class TIoBrokerInOutFunctionBase extends TYahkaFunctionBase implements IInOutFunction {\n    protected valueForHomeKit: any = undefined;\n    protected errorForHomeKit: any = null;\n\n    public fromIOBroker(callback: (error: any, plainIOValue: any) => void) {\n        this.log.debug('fromIOBroker event - delivering cached value (' + JSON.stringify(this.valueForHomeKit) + \")\");\n        callback(null, this.valueForHomeKit);\n    }\n\n    public toIOBroker(plainIoValue: any, callback: () => void) {\n        this.log.debug('writing state to ioBroker: ' + JSON.stringify(plainIoValue));\n        this.updateIOBrokerValue(plainIoValue, callback);\n    }\n\n    protected cacheChanged(stateName: string, callback: IInOutChangeNotify) {\n        try {\n            this.valueForHomeKit = this.recalculateHomekitValues(stateName);\n            this.errorForHomeKit = null;\n        } catch (e) {\n            this.errorForHomeKit = e;\n        }\n\n        if (this.valueForHomeKit != null)\n            callback(this.valueForHomeKit);\n    }\n\n    protected recalculateHomekitValues(stateName: string) {\n        // noop\n    }\n\n    protected updateIOBrokerValue(plainIoValue: any, callback: () => void) {\n        // to be filled in derived class\n    }\n\n}\n\nexport abstract class TIoBrokerInOutFunction_StateBase implements ISubscriptionRequestor, IInOutFunction {\n    protected debounceTimer: NodeJS.Timeout = null;\n    public subscriptionRequests: ISubscriptionRequest[] = [];\n\n    constructor(protected adapter: ioBroker.Adapter, protected stateName: string, protected deferredTime: number = 0) {\n        this.addSubscriptionRequest(stateName);\n    }\n\n    addSubscriptionRequest(stateName: string) {\n        let subscriptionEvent = this.subscriptionEvent.bind(this, stateName);\n        this.subscriptionRequests.push({\n            subscriptionType: 'state',\n            subscriptionIdentifier: stateName,\n            subscriptionEvent: subscriptionEvent\n        });\n    }\n\n    getValueOnRead(ioState: ioBroker.State): any {\n        return ioState?.val;\n    }\n\n    getValueOnNotify(ioState: ioBroker.State): any {\n        return ioState?.val;\n    }\n\n    toIOBroker(plainIoValue, callback) {\n        this.adapter.log.debug('writing state to ioBroker [' + this.stateName + ']: ' + JSON.stringify(plainIoValue));\n        this.adapter.getForeignState(this.stateName, (error, ioState) => {\n            let value = this.getValueOnRead(ioState);\n            let valueChanged = value !== plainIoValue;\n            this.adapter.log.debug('checking value change: ' + JSON.stringify(value) + ' != ' + JSON.stringify(plainIoValue) + ' = ' + valueChanged);\n            if (valueChanged) {\n                this.adapter.setForeignState(this.stateName, plainIoValue, false, (error) => {\n                    if (error)\n                        this.adapter.log.error('setForeignState error [' + this.stateName + '] to [' + JSON.stringify(plainIoValue) + ']: ' + error);\n                    callback();\n                });\n            } else {\n                callback();\n            }\n        });\n    }\n\n    fromIOBroker(callback) {\n        this.adapter.log.debug('reading state from ioBroker [' + this.stateName + ']');\n        this.adapter.getForeignState(this.stateName, (error, ioState) => {\n            this.adapter.log.debug('read state from ioBroker [' + this.stateName + ']: ' + JSON.stringify(ioState));\n            if (error)\n                this.adapter.log.error('... with error: ' + error);\n\n            let value = this.getValueOnRead(ioState);\n            callback(error, value);\n        });\n    }\n\n    subscriptionEvent(stateName: string, ioState: ioBroker.State, callback: IInOutChangeNotify) {\n        this.adapter.log.debug('change event from ioBroker via [' + this.stateName + ']' + JSON.stringify(ioState));\n        let newValue = this.getValueOnNotify(ioState);\n        if (newValue != null)\n            this.executeCallback(callback, newValue);\n        else\n            this.adapter.log.debug('state was filtered - notification is canceled');\n    }\n\n    executeCallback(callback: IInOutChangeNotify, plainIOValue: any) {\n        if (this.deferredTime > 0)\n            this.setupDeferredChangeEvent(callback, plainIOValue);\n        else\n            callback(plainIOValue);\n    }\n\n    setupDeferredChangeEvent(callback: IInOutChangeNotify, plainIOValue: any) {\n        this.cancelDeferredChangeEvent();\n        this.debounceTimer = setTimeout(this.deferredChangeEvent.bind(this, callback, plainIOValue), 150);\n    }\n\n    cancelDeferredChangeEvent() {\n        clearTimeout(this.debounceTimer);\n        this.debounceTimer = null;\n    }\n\n    deferredChangeEvent(callback: IInOutChangeNotify, plainIOValue: any) {\n        this.adapter.log.debug('[' + this.stateName + '] firing deferred change event:' + JSON.stringify(plainIOValue));\n        callback(plainIOValue);\n    }\n\n}","import { IInOutFunction } from \"./iofunc.base\";\nexport class TIoBrokerInOutFunction_Const implements IInOutFunction {\n\n    static create(adapter: ioBroker.Adapter, parameters: any): IInOutFunction {\n        return new TIoBrokerInOutFunction_Const(adapter, parameters);\n    }\n\n    constructor(private adapter: ioBroker.Adapter, private parameters: any) {\n\n    }\n\n    toIOBroker(ioValue: any, callback: () => void) {\n        callback();\n    }\n    fromIOBroker(callback: (error: any, plainIOValue: any) => void) {\n        callback(null, this.parameters);\n    }\n}\n","import { IInOutFunction, TIoBrokerInOutFunction_StateBase, IInOutChangeNotify } from \"./iofunc.base\";\n\nexport class TIoBrokerInOutFunction_HomematicWindowCovering_TargetPosition extends TIoBrokerInOutFunction_StateBase {\n    protected lastWorkingState: boolean = false;\n    protected lastAcknowledgedValue: any = undefined;\n    protected debounceTimer: NodeJS.Timeout = null;\n\n    static create(adapter: ioBroker.Adapter, parameters: any): IInOutFunction {\n        let p: Array<string>;\n\n        if (typeof parameters === 'string')\n            p = [parameters];\n        else if (parameters instanceof Array)\n            p = parameters;\n        else\n            p = [];\n\n        if (p.length == 0)\n            return undefined;\n\n        let stateName: string = p[0];\n        let workingItemName: string;\n        if (p.length >= 2)\n            workingItemName = p[1];\n        else {\n            let pathNames = stateName.split('.');\n            pathNames[pathNames.length - 1] = 'WORKING';\n            workingItemName = pathNames.join('.');\n        }\n\n        return new TIoBrokerInOutFunction_HomematicWindowCovering_TargetPosition(adapter, stateName, workingItemName);\n    }\n\n\n    constructor(protected adapter: ioBroker.Adapter, protected stateName: string, protected workingItem: string) {\n        super(adapter, stateName, 0);\n        this.addSubscriptionRequest(workingItem);\n        adapter.getForeignState(workingItem, (error, ioState) => {\n            if (ioState)\n                this.lastWorkingState = Boolean(ioState?.val);\n            else\n                this.lastWorkingState = undefined;\n        });\n    }\n\n    subscriptionEvent(stateName: string, ioState: ioBroker.State, callback: IInOutChangeNotify) {\n        if (!ioState)\n            return;\n\n        if (stateName == this.workingItem) {\n            this.adapter.log.debug('[' + this.stateName + '] got a working item change event: ' + JSON.stringify(ioState));\n            this.lastWorkingState = Boolean(ioState?.val);\n            this.setupDeferredChangeEvent(callback);\n        } else if (stateName == this.stateName) {\n            this.adapter.log.debug('[' + this.stateName + '] got a target state change event:' + JSON.stringify(ioState));\n            if (ioState.ack) {\n                this.lastAcknowledgedValue = ioState?.val;\n                this.setupDeferredChangeEvent(callback);\n            }\n        }\n    }\n\n    setupDeferredChangeEvent(callback: IInOutChangeNotify) {\n        this.cancelDeferredChangeEvent();\n        this.debounceTimer = setTimeout(this.deferredChangeEvent.bind(this, callback), 150);\n    }\n\n    cancelDeferredChangeEvent() {\n        clearTimeout(this.debounceTimer);\n        this.debounceTimer = null;\n    }\n\n    deferredChangeEvent(callback: IInOutChangeNotify) {\n        if (!this.lastWorkingState) { // only fire callback if the covering does not move\n            this.adapter.log.debug('[' + this.stateName + '] firing target state change event:' + JSON.stringify(this.lastAcknowledgedValue));\n            callback(this.lastAcknowledgedValue);\n        } else {\n            this.adapter.log.debug('[' + this.stateName + '] canceling target state change event - covering is working');\n        }\n    }\n}\n\n","import { TIoBrokerInOutFunctionBase, IInOutFunction, IInOutChangeNotify } from './iofunc.base';\nimport { isObject } from 'util';\nimport { propertyExists } from '../shared/yahka.utils';\n\n\nexport interface TIoBrokerInOutFunction_Homematic_Dimmer_Parameter {\n    levelState: string;\n    restoreToPreviousLevel?: boolean;\n    defaultSwitchOnLevel?: number;\n}\n\nexport function isHomematic_Dimmer_Parameter(value: any): value is TIoBrokerInOutFunction_Homematic_Dimmer_Parameter {\n    if (value === undefined)\n        return false;\n    if (!isObject(value))\n        return false;\n    return propertyExists<TIoBrokerInOutFunction_Homematic_Dimmer_Parameter>(value, \"levelState\")\n}\n\n\nexport class TIoBrokerInOutFunction_Homematic_Dimmer_Base extends TIoBrokerInOutFunctionBase {\n    protected lastOnLevel: ioBroker.State = { val: undefined, ack: false, ts: undefined, lc: undefined, from: undefined };\n    static parseParameters(parameters: any): TIoBrokerInOutFunction_Homematic_Dimmer_Parameter {\n        if (!isHomematic_Dimmer_Parameter(parameters)) {\n            return undefined\n        };\n        return parameters;\n    }\n    constructor(adapter: ioBroker.Adapter, functionName: string, protected parameters: TIoBrokerInOutFunction_Homematic_Dimmer_Parameter) {\n        super(adapter, functionName + \"[\" + parameters.levelState + \"]\");\n        this.addSubscriptionRequest(parameters.levelState);\n    }\n\n    protected cacheChanged(stateName: string, callback: IInOutChangeNotify) {\n        // save level if we are switching off\n        if (stateName === this.parameters.levelState) {\n            const cacheValue = this.readValueFromCache(stateName);\n            if (cacheValue.val > 0) {\n                this.lastOnLevel = cacheValue;\n            }\n        }\n        super.cacheChanged(stateName, callback);\n    }\n}\n\n\n\nexport class TIoBrokerInOutFunction_Homematic_Dimmer_On extends TIoBrokerInOutFunction_Homematic_Dimmer_Base {\n    static create(adapter: ioBroker.Adapter, parameters: any): IInOutFunction {\n        let params = TIoBrokerInOutFunction_Homematic_Dimmer_On.parseParameters(parameters);\n        if (params === undefined) {\n            return undefined\n        }\n        return new TIoBrokerInOutFunction_Homematic_Dimmer_On(adapter, params);\n    }\n\n    constructor(protected adapter: ioBroker.Adapter, protected parameters: TIoBrokerInOutFunction_Homematic_Dimmer_Parameter) {\n        super(adapter, \"Homematic.Dimmer.On\", parameters);\n    }\n\n    protected recalculateHomekitValues(stateName: string) {\n        let hkValue = this.stateCache.get(this.parameters.levelState);\n        return Boolean(hkValue?.val > 0);\n    }\n\n    protected updateIOBrokerValue(plainIoValue: any, callback: () => void) {\n        setTimeout(() => this.executeIOBrokerValue(plainIoValue, callback), 50);\n    }\n    protected executeIOBrokerValue(plainIoValue: any, callback: () => void) {\n\n        const isSwitchingOn = Boolean(plainIoValue);\n        const stateName = this.parameters.levelState;\n\n        const newOnValue = (this.parameters.restoreToPreviousLevel ? this.lastOnLevel?.val : this.parameters.defaultSwitchOnLevel) || this.parameters.defaultSwitchOnLevel || 100;\n        const newOffValue = 0;\n        const newValue = isSwitchingOn ? newOnValue : newOffValue;\n\n        if (isSwitchingOn && this.parameters.restoreToPreviousLevel) {\n            this.log.debug('using previous level for switching on: ' + JSON.stringify(this.lastOnLevel?.val));\n        }\n\n\n        this.log.debug('writing state to ioBroker [' + stateName + ']: ' + JSON.stringify(newValue));\n        this.adapter.getForeignState(stateName, (error, ioState) => {\n            let value = ioState?.val;\n            if (isSwitchingOn && value > 0) {\n                this.log.debug('function should switch on but level is already not equal to 0: ' + JSON.stringify(value));\n                callback();\n                return;\n            }\n\n            let valueChanged = value !== newValue;\n            this.log.debug('checking value change: ' + JSON.stringify(value) + ' != ' + JSON.stringify(newValue) + ' = ' + valueChanged);\n            if (valueChanged) {\n                this.adapter.setForeignState(stateName, newValue as any, false, (error) => {\n                    if (error) {\n                        this.log.error('setForeignState error [' + stateName + '] to [' + JSON.stringify(newValue) + ']: ' + error);\n                        callback();\n                    }\n                    callback();\n                });\n            } else {\n                callback();\n            }\n        });\n\n    }\n}\n\n\nexport class TIoBrokerInOutFunction_Homematic_Dimmer_Brightness extends TIoBrokerInOutFunction_Homematic_Dimmer_Base {\n    static create(adapter: ioBroker.Adapter, parameters: any): IInOutFunction {\n        let params = TIoBrokerInOutFunction_Homematic_Dimmer_On.parseParameters(parameters);\n        if (params === undefined) {\n            return undefined\n        }\n        return new TIoBrokerInOutFunction_Homematic_Dimmer_Brightness(adapter, params);\n    }\n\n    constructor(protected adapter: ioBroker.Adapter, protected parameters: TIoBrokerInOutFunction_Homematic_Dimmer_Parameter) {\n        super(adapter, \"Homematic.Dimmer.Brightness\", parameters);\n    }\n\n    protected recalculateHomekitValues(stateName: string) {\n        let hkValue = this.stateCache.get(this.parameters.levelState);\n        return hkValue?.val == 0 ? this.lastOnLevel?.val : hkValue?.val;\n    }\n\n    protected updateIOBrokerValue(plainIoValue: any, callback: () => void) {\n        const newValue = plainIoValue;\n        const stateName = this.parameters.levelState;\n\n\n        this.log.debug('writing state to ioBroker [' + stateName + ']: ' + JSON.stringify(newValue));\n        this.adapter.getForeignState(stateName, (error, ioState) => {\n            let value = ioState?.val;\n            let valueChanged = value !== newValue;\n            this.log.debug('checking value change: ' + JSON.stringify(value) + ' != ' + JSON.stringify(newValue) + ' = ' + valueChanged);\n            if (valueChanged) {\n                this.adapter.setForeignState(stateName, newValue, false, (error) => {\n                    if (error) {\n                        this.log.error('setForeignState error [' + stateName + '] to [' + JSON.stringify(newValue) + ']: ' + error);\n                        callback();\n                    }\n                    callback();\n                });\n            } else {\n                callback();\n            }\n        });\n\n    }\n}","import { TIoBrokerInOutFunctionBase, IInOutFunction } from './iofunc.base';\nimport { isObject } from 'util';\n\n\nexport interface TIoBrokerInOutFunction_MultiStateParameter {\n    readState: string;\n    writeState?: string;\n    onlyAcknowledged?: boolean;\n}\n\nexport function isMultiStateParameter(value: any): value is TIoBrokerInOutFunction_MultiStateParameter {\n    if (value === undefined)\n        return false;\n    if (!isObject(value))\n        return false;\n    let propName: keyof TIoBrokerInOutFunction_MultiStateParameter = \"readState\";\n    return (propName in value);\n}\n\nexport class TIoBrokerInOutFunction_MultiState extends TIoBrokerInOutFunctionBase {\n\n    static parseParameters(parameters: any): TIoBrokerInOutFunction_MultiStateParameter[] {\n        if (Array.isArray(parameters)) {\n            return parameters.filter(isMultiStateParameter);\n        } else if (typeof parameters === \"string\") {\n            return [{ readState: parameters }];\n        } else {\n            return undefined\n        }\n    }\n    static create(adapter: ioBroker.Adapter, parameters: any): IInOutFunction {\n        let stateNames = TIoBrokerInOutFunction_MultiState.parseParameters(parameters);\n        if (stateNames === undefined) {\n            return undefined\n        }\n        return new TIoBrokerInOutFunction_MultiState(adapter, stateNames);\n    }\n\n    constructor(protected adapter: ioBroker.Adapter, protected stateProperties: TIoBrokerInOutFunction_MultiStateParameter[]) {\n        super(adapter, \"TIoBrokerInOutFunctionMultiState\");\n        for (let state of stateProperties) {\n            this.addSubscriptionRequest(state.readState);\n        }\n    }\n\n    protected recalculateHomekitValues(stateName: string) {\n        let hkValues = this.stateProperties.map((state) => this.stateCache.get(state.readState)?.val);\n        return hkValues.length === 1 ? hkValues[0] : hkValues;\n    }\n\n    private updateSingleIOBrokerValue(state: TIoBrokerInOutFunction_MultiStateParameter, newValue: any): Promise<void> {\n        if (newValue === undefined)\n            return Promise.resolve();\n\n        return new Promise<void>((resolve, reject) => {\n            let stateName = state.writeState || state.readState;\n            this.log.debug('writing state to ioBroker [' + stateName + ']: ' + JSON.stringify(newValue));\n            this.adapter.getForeignState(stateName, (error, ioState) => {\n                let value = ioState?.val;\n                let valueChanged = value !== newValue;\n                this.log.debug('checking value change: ' + JSON.stringify(value) + ' != ' + JSON.stringify(newValue) + ' = ' + valueChanged);\n                if (valueChanged) {\n                    this.adapter.setForeignState(stateName, newValue, false, (error) => {\n                        if (error) {\n                            this.log.error('setForeignState error [' + stateName + '] to [' + JSON.stringify(newValue) + ']: ' + error);\n                            reject(error);\n                        }\n                        resolve();\n                    });\n                } else {\n                    resolve();\n                }\n            });\n        });\n    }\n\n    protected updateIOBrokerValue(plainIoValue: any, callback: () => void) {\n        let ioValueArray = Array.isArray(plainIoValue) ? plainIoValue : [plainIoValue];\n        let promiseArray = this.stateProperties.map((state, index) => {\n            let newValueForThisState = ioValueArray[index];\n            return this.updateSingleIOBrokerValue(state, newValueForThisState);\n        });\n        Promise.all(promiseArray).then(() => {\n            this.log.debug('wrote all states sucessfully to ioBroker');\n            callback();\n        }).catch((e) => {\n            this.log.error('could not write all states to ioBroker: ' + JSON.stringify(e));\n            callback();\n        });\n    }\n}\n","import { TIoBrokerInOutFunction_StateBase, IInOutFunction } from './iofunc.base';\n\nexport class TIoBrokerInOutFunction_State extends TIoBrokerInOutFunction_StateBase {\n    static create(adapter: ioBroker.Adapter, parameters: any): IInOutFunction {\n        if (typeof parameters !== \"string\")\n            return undefined;\n        let stateName: string = parameters;\n\n        return new TIoBrokerInOutFunction_State(adapter, stateName);\n    }\n}\n\nexport class TIoBrokerInOutFunction_StateDeferred extends TIoBrokerInOutFunction_StateBase {\n    static create(adapter: ioBroker.Adapter, parameters: any): IInOutFunction {\n        if (typeof parameters !== \"string\")\n            return undefined;\n        let stateName: string = parameters;\n\n        return new TIoBrokerInOutFunction_StateDeferred(adapter, stateName, 250);\n    }\n}\n\nexport class TIoBrokerInOutFunction_State_OnlyACK extends TIoBrokerInOutFunction_StateBase {\n    protected lastAcknowledgedValue: any;\n\n    static create(adapter: ioBroker.Adapter, parameters: any): IInOutFunction {\n        if (typeof parameters !== \"string\")\n            return undefined;\n        let stateName: string = parameters;\n\n        return new TIoBrokerInOutFunction_State_OnlyACK(adapter, stateName);\n    }\n\n    getValueOnRead(ioState: ioBroker.State): any {\n        if (ioState)\n            if (ioState.ack) {\n                this.lastAcknowledgedValue = ioState?.val;\n                return ioState?.val;\n            } else {\n                this.adapter.log.debug(\"faking CurrentState.Read for [\" + this.stateName + ']: ' + JSON.stringify(this.lastAcknowledgedValue));\n                return this.lastAcknowledgedValue;\n            }\n        else\n            return null;\n    }\n\n    getValueOnNotify(ioState: ioBroker.State): any {\n        if (ioState)\n            if (ioState.ack) {\n                this.lastAcknowledgedValue = ioState?.val;\n                return ioState?.val;\n            } else {\n                this.adapter.log.debug(\"discarding CurrentState.Notify for [\" + this.stateName + ']');\n                return undefined;\n            }\n        else\n            return null;\n    }\n}\n\n\n\n\n","/// <reference path=\"./typings/index.d.ts\" />\nimport debug = require('debug');\nimport util = require('util');\nimport { Configuration } from './shared/yahka.configuration';\nimport { importHAPCommunityTypesAndFixes } from './yahka.community.types';\nimport { Accessory, Bridge, uuid, Characteristic, Service, init as hapInit, MDNSAdvertiser } from 'hap-nodejs';\nimport { YahkaServiceInitializer } from './yahka.homekit-service';\nimport { IHomeKitBridgeBindingFactory, ILogger } from './yahka.interfaces';\nvar pjson = require('../package.json');\n\nimportHAPCommunityTypesAndFixes();\n\ntype IPublishingMethod = () => void;\n\nexport class THomeKitBridge {\n    private bridgeObject: Bridge;\n    private serviceInitializer: YahkaServiceInitializer;\n    constructor(private config: Configuration.IBridgeConfig, FBridgeFactory: IHomeKitBridgeBindingFactory, private FLogger: ILogger) {\n        this.serviceInitializer = new YahkaServiceInitializer(FBridgeFactory, FLogger);\n        this.init();\n    }\n\n    public init() {\n        this.bridgeObject = this.setupBridge();\n        const devicesToPublish: IPublishingMethod[] = [\n            () => {\n                let advertiser = this.config.useLegacyAdvertiser ? MDNSAdvertiser.BONJOUR : MDNSAdvertiser.AVAHI;\n                advertiser = this.config.useCiaoAdvertiser ? MDNSAdvertiser.CIAO : advertiser;\n                this.FLogger.info(`publishing bridge ${this.config.name} on ${this.config.interface ?? '0.0.0.0'} using ${advertiser}`);\n                this.bridgeObject.publish({\n                    username: this.config.username,\n                    port: this.config.port,\n                    pincode: this.config.pincode,\n                    category: 2,\n                    bind: this.config.interface != '' ? this.config.interface : undefined,\n                    advertiser,\n                });\n            },\n        ];\n\n        if (this.config.devices) {\n            for (let device of this.config.devices) {\n                if (device.enabled === false) {\n                    continue;\n                }\n                const hapDevice = this.createDevice(device);\n\n                if (device.publishAsOwnDevice) {\n                    devicesToPublish.push(() => {\n                        let advertiser = device.useLegacyAdvertiser ? MDNSAdvertiser.BONJOUR : MDNSAdvertiser.AVAHI;\n                        advertiser = device.useCiaoAdvertiser ? MDNSAdvertiser.CIAO : advertiser;\n                        this.FLogger.info(`publishing device ${device.name} on ${device.interface ?? '0.0.0.0'} using ${advertiser}`);\n                        hapDevice.publish({\n                            username: device.username,\n                            port: device.port,\n                            pincode: device.pincode,\n                            category: device.category,\n                            advertiser,\n                            mdns: {\n                                interface: device.interface,\n                                reuseAddr: true,\n                            } as any,\n                        });\n                    });\n                } else {\n                    try {\n                        this.bridgeObject.addBridgedAccessory(hapDevice);\n                    } catch (e) {\n                        this.FLogger.warn(e);\n                        this.FLogger.warn('Error by adding: ' + JSON.stringify(device));\n                    }\n                }\n            }\n        }\n\n        devicesToPublish.forEach((m) => m());\n    }\n\n    private setupBridge() {\n        let hapBridge = new Bridge(this.config.name, uuid.generate(this.config.ident));\n\n        let infoService = hapBridge.getService(Service.AccessoryInformation);\n        infoService.setCharacteristic(Characteristic.Manufacturer, this.config.manufacturer || 'not configured');\n        infoService.setCharacteristic(Characteristic.Model, this.config.model || 'not configured');\n        infoService.setCharacteristic(Characteristic.SerialNumber, this.config.serial || 'not configured');\n        if (this.config.firmware !== undefined && this.config.firmware !== '') {\n            infoService.setCharacteristic(Characteristic.FirmwareRevision, this.config.firmware);\n        } else {\n            infoService.setCharacteristic(Characteristic.FirmwareRevision, pjson.version);\n        }\n\n        // Listen for bridge identification event\n        hapBridge.on('identify', (paired, callback) => {\n            this.FLogger.debug('Node Bridge identify:' + paired);\n            callback(); // success\n        });\n        return hapBridge;\n    }\n\n    private createDevice(device: Configuration.IDeviceConfig) {\n        let devName = device.name;\n        let deviceID = uuid.generate(this.config.ident + ':' + devName);\n        let i = 0;\n        while (this.bridgeObject.bridgedAccessories.some((a) => a.UUID == deviceID)) {\n            devName = device.name + '_' + ++i;\n            deviceID = uuid.generate(this.config.ident + ':' + devName);\n        }\n\n        this.FLogger.info('adding ' + devName + ' with UUID: ' + deviceID);\n        let hapDevice = new Accessory(devName, deviceID);\n\n        let infoService = hapDevice.getService(Service.AccessoryInformation);\n        infoService.setCharacteristic(Characteristic.Manufacturer, device.manufacturer || 'not configured');\n        infoService.setCharacteristic(Characteristic.Model, device.model || 'not configured');\n        infoService.setCharacteristic(Characteristic.SerialNumber, device.serial || 'not configured');\n        if (device.firmware !== undefined && device.firmware !== '') {\n            infoService.setCharacteristic(Characteristic.FirmwareRevision, device.firmware);\n        }\n\n        hapDevice.on('identify', (paired, callback) => {\n            this.FLogger.debug(`[${device.name}] device identify`);\n            callback(); // success\n        });\n        this.serviceInitializer.initServices(hapDevice, device.services);\n        return hapDevice;\n    }\n}\n\nlet hapInited: boolean = false;\nlet originalLogMethod = debug.log;\n\nexport function initHAP(storagePath: string, HAPdebugLogMethod: Function) {\n    if (hapInited) {\n        return;\n    }\n\n    hapInit(storagePath);\n    debug.log = function () {\n        HAPdebugLogMethod(util.format.apply(this, arguments));\n    };\n}\n\nexport function deinitHAP() {\n    if (!hapInited) {\n        return;\n    }\n    debug.disable();\n    debug.log = originalLogMethod;\n    hapInited = false;\n}\n","/// <reference path=\"./typings/index.d.ts\" />\nimport { spawn, ChildProcess } from 'child_process';\nimport {\n    uuid,\n    Accessory,\n    Service,\n    Characteristic,\n    SnapshotRequest,\n    PrepareStreamRequest,\n    SessionIdentifier,\n    CameraStreamingDelegate,\n    CameraController,\n    SRTPCryptoSuites,\n    H264Profile,\n    H264Level,\n    SnapshotRequestCallback,\n    PrepareStreamCallback,\n    PrepareStreamResponse,\n    StreamingRequest,\n    StreamRequestCallback,\n    CameraStreamingOptions,\n    StreamRequestTypes,\n    AudioStreamingCodecType,\n    AudioStreamingSamplerate,\n    Categories,\n    MDNSAdvertiser,\n} from 'hap-nodejs';\nimport { IHomeKitBridgeBindingFactory, ILogger } from './yahka.interfaces';\nimport { Configuration } from './shared/yahka.configuration';\nimport { YahkaServiceInitializer } from './yahka.homekit-service';\n\ntype SessionInfo = {\n    address: string; // address of the HAP controller\n\n    videoPort: number; // port of the controller\n    localVideoPort: number;\n    videoCryptoSuite: SRTPCryptoSuites; // should be saved if multiple suites are supported\n    videoSRTP: Buffer; // key and salt concatenated\n    videoSSRC: number; // rtp synchronisation source\n\n    audioPort: number;\n    audioCryptoSuite: SRTPCryptoSuites;\n    audioSRTP: Buffer;\n    audioSSRC: number;\n};\n\ntype OngoingSession = {\n    localVideoPort: number;\n    process: ChildProcess;\n};\n\nexport class THomeKitIPCamera implements CameraStreamingDelegate {\n    private cameraController: CameraController;\n    private camera: Accessory;\n    private pendingSessions: Record<string, Partial<SessionInfo>> = {};\n    private ongoingSessions: Record<string, OngoingSession> = {};\n    private serviceInitializer: YahkaServiceInitializer;\n    constructor(private camConfig: Configuration.ICameraConfig, FBridgeFactory: IHomeKitBridgeBindingFactory, private FLogger: ILogger) {\n        this.serviceInitializer = new YahkaServiceInitializer(FBridgeFactory, FLogger);\n        this.init();\n    }\n\n    init() {\n        if (!this.camConfig.enabled) {\n            return;\n        }\n        this.createCameraDevice();\n        this.createCameraController();\n        this.createAdditionalServices();\n        this.publishCamera();\n    }\n\n    private createOptionsDictionary(): CameraStreamingOptions {\n        var videoResolutions = [];\n        var maxFPS = this.camConfig.maxFPS > 30 ? 30 : this.camConfig.maxFPS;\n\n        if (this.camConfig.maxWidth >= 320) {\n            if (this.camConfig.maxHeight >= 240) {\n                videoResolutions.push([320, 240, maxFPS]);\n                if (maxFPS > 15) {\n                    videoResolutions.push([320, 240, 15]);\n                }\n            }\n\n            if (this.camConfig.maxHeight >= 180) {\n                videoResolutions.push([320, 180, maxFPS]);\n                if (maxFPS > 15) {\n                    videoResolutions.push([320, 180, 15]);\n                }\n            }\n        }\n\n        if (this.camConfig.maxWidth >= 480) {\n            if (this.camConfig.maxHeight >= 360) {\n                videoResolutions.push([480, 360, maxFPS]);\n            }\n\n            if (this.camConfig.maxHeight >= 270) {\n                videoResolutions.push([480, 270, maxFPS]);\n            }\n        }\n\n        if (this.camConfig.maxWidth >= 640) {\n            if (this.camConfig.maxHeight >= 480) {\n                videoResolutions.push([640, 480, maxFPS]);\n            }\n\n            if (this.camConfig.maxHeight >= 360) {\n                videoResolutions.push([640, 360, maxFPS]);\n            }\n        }\n\n        if (this.camConfig.maxWidth >= 1280) {\n            if (this.camConfig.maxHeight >= 960) {\n                videoResolutions.push([1280, 960, maxFPS]);\n            }\n\n            if (this.camConfig.maxHeight >= 720) {\n                videoResolutions.push([1280, 720, maxFPS]);\n            }\n        }\n\n        if (this.camConfig.maxWidth >= 1920) {\n            if (this.camConfig.maxHeight >= 1080) {\n                videoResolutions.push([1920, 1080, maxFPS]);\n            }\n        }\n\n        let options: CameraStreamingOptions = {\n            proxy: false, // Requires RTP/RTCP MUX Proxy\n            disable_audio_proxy: false, // If proxy = true, you can opt out audio proxy via this\n            srtp: true, // Supports SRTP AES_CM_128_HMAC_SHA1_80 encryption\n            supportedCryptoSuites: [SRTPCryptoSuites.AES_CM_128_HMAC_SHA1_80],\n            video: {\n                resolutions: videoResolutions,\n                codec: {\n                    profiles: [H264Profile.BASELINE, H264Profile.MAIN, H264Profile.HIGH],\n                    levels: [H264Level.LEVEL3_1, H264Level.LEVEL3_2, H264Level.LEVEL4_0],\n                },\n            },\n            audio: {\n                comfort_noise: false,\n                codecs: [\n                    {\n                        type: AudioStreamingCodecType.AAC_ELD,\n                        samplerate: AudioStreamingSamplerate.KHZ_16,\n                    },\n                ],\n            },\n        };\n        return options;\n    }\n\n    private createCameraDevice() {\n        let deviceID = uuid.generate(this.camConfig.ident + ':' + this.camConfig.name);\n        let hapDevice = new Accessory(this.camConfig.name, deviceID);\n\n        let infoService = hapDevice.getService(Service.AccessoryInformation);\n        infoService.setCharacteristic(Characteristic.Manufacturer, this.camConfig.manufacturer || 'not configured');\n        infoService.setCharacteristic(Characteristic.Model, this.camConfig.model || 'not configured');\n        infoService.setCharacteristic(Characteristic.SerialNumber, this.camConfig.serial || 'not configured');\n        if (this.camConfig.firmware !== undefined && this.camConfig.firmware !== '') {\n            infoService.setCharacteristic(Characteristic.FirmwareRevision, this.camConfig.firmware);\n        }\n\n        hapDevice.on('identify', (paired, callback) => {\n            this.FLogger.debug('camera identify');\n            callback(); // success\n        });\n\n        this.camera = hapDevice;\n    }\n\n    public createCameraController() {\n        this.cameraController = new CameraController({\n            cameraStreamCount: 2, // HomeKit requires at least 2 streams, but 1 is also just fine\n            delegate: this,\n            streamingOptions: this.createOptionsDictionary(),\n        });\n\n        this.camera.configureController(this.cameraController);\n    }\n\n    public createAdditionalServices() {\n        this.serviceInitializer.initServices(this.camera, this.camConfig.services);\n    }\n\n    private publishCamera() {\n        let advertiser = this.camConfig.useLegacyAdvertiser ? MDNSAdvertiser.BONJOUR : MDNSAdvertiser.AVAHI;\n        advertiser = this.camConfig.useCiaoAdvertiser ? MDNSAdvertiser.CIAO : advertiser;\n        this.FLogger.info(`publishing camera ${this.camConfig.name} on ${this.camConfig.interface ?? '0.0.0.0'} using ${advertiser}`);\n        this.camera.publish(\n            {\n                username: this.camConfig.username,\n                port: this.camConfig.port,\n                pincode: this.camConfig.pincode,\n                category: Categories.CAMERA,\n                bind: this.camConfig.interface != '' ? this.camConfig.interface : undefined,\n                advertiser,\n            },\n            false\n        );\n    }\n\n    public handleSnapshotRequest(request: SnapshotRequest, callback: SnapshotRequestCallback): void {\n        let params = {\n            source: this.camConfig.source,\n            width: request.width,\n            height: request.height,\n        };\n        let ffmpegCommand = this.camConfig.ffmpegCommandLine.snapshot.map((s) =>\n            s.replace(/\\$\\{(.*?)\\}/g, (_, word) => {\n                return params[word];\n            })\n        );\n\n        this.FLogger.debug('Snapshot run: ffmpeg ' + ffmpegCommand.join(' '));\n        let ffmpeg = spawn('ffmpeg', ffmpegCommand, { env: process.env });\n\n        var imageBuffer = Buffer.alloc(0);\n\n        ffmpeg.stdout.on('data', function (data) {\n            imageBuffer = Buffer.concat([imageBuffer, <Buffer>data]);\n        });\n        ffmpeg.on('close', function (code) {\n            callback(undefined, imageBuffer);\n        });\n    }\n\n    public prepareStream(request: PrepareStreamRequest, callback: PrepareStreamCallback): void {\n        let sessionInfo: Partial<SessionInfo> = {};\n\n        const sessionID: SessionIdentifier = request.sessionID;\n        const targetAddress = request.targetAddress;\n\n        sessionInfo.address = targetAddress;\n        let response: Partial<PrepareStreamResponse> = {};\n\n        let videoInfo = request.video;\n        if (videoInfo) {\n            const targetPort = videoInfo.port;\n            const videoCryptoSuite = videoInfo.srtpCryptoSuite; // could be used to support multiple crypto suite (or support no suite for debugging)\n            const videoSrtpKey = videoInfo.srtp_key;\n            const videoSrtpSalt = videoInfo.srtp_salt;\n\n            const videoSSRC = CameraController.generateSynchronisationSource();\n\n            response.video = {\n                port: targetPort,\n                ssrc: videoSSRC,\n                srtp_key: videoSrtpKey,\n                srtp_salt: videoSrtpSalt,\n            };\n\n            sessionInfo.videoPort = targetPort;\n            sessionInfo.videoSRTP = Buffer.concat([videoSrtpKey, videoSrtpSalt]);\n            sessionInfo.videoSSRC = videoSSRC;\n            sessionInfo.videoCryptoSuite = videoCryptoSuite;\n        }\n\n        const audioInfo = request.audio;\n        if (audioInfo) {\n            const targetPort = audioInfo.port;\n            const audioCryptoSuite = audioInfo.srtpCryptoSuite; // could be used to support multiple crypto suite (or support no suite for debugging)\n            const audioSrtpKey = audioInfo.srtp_key;\n            const audioSrtpSalt = audioInfo.srtp_salt;\n            const audioSSRC = CameraController.generateSynchronisationSource();\n\n            response.audio = {\n                port: targetPort,\n                ssrc: audioSSRC,\n                srtp_key: audioSrtpKey,\n                srtp_salt: audioSrtpSalt,\n            };\n\n            sessionInfo.audioPort = targetPort;\n            sessionInfo.audioSRTP = Buffer.concat([audioSrtpKey, audioSrtpSalt]);\n            sessionInfo.audioSSRC = audioSSRC;\n            sessionInfo.audioCryptoSuite = audioCryptoSuite;\n        }\n\n        // let currentAddress = ip.address();\n        // var addressResp: Partial<Address> = {\n        //     address: currentAddress\n        // };\n\n        // if (ip.isV4Format(currentAddress)) {\n        //     addressResp.type = \"v4\";\n        // } else {\n        //     addressResp.type = \"v6\";\n        // }\n\n        // response.address = addressResp as Address;\n        this.pendingSessions[sessionID] = sessionInfo;\n\n        callback(undefined, response as PrepareStreamResponse);\n    }\n\n    public handleStreamRequest(request: StreamingRequest, callback: StreamRequestCallback): void {\n        var sessionId = request.sessionID;\n        switch (request.type) {\n            case StreamRequestTypes.START: {\n                var sessionInfo = this.pendingSessions[sessionId];\n                this.FLogger.debug('Session Request:' + JSON.stringify(request, undefined, 2));\n                if (sessionInfo) {\n                    let width = 1280;\n                    let height = 720;\n                    let fps = 30;\n                    let bitrate = 300;\n                    let codec = this.camConfig.codec ?? 'libx264';\n                    const mtu = request.video?.mtu ?? 1316;\n                    let videoInfo = request.video;\n                    if (videoInfo) {\n                        width = videoInfo.width;\n                        height = videoInfo.height;\n\n                        let expectedFPS = videoInfo.fps;\n                        if (expectedFPS < fps) {\n                            fps = expectedFPS;\n                        }\n\n                        bitrate = videoInfo.max_bit_rate;\n                    }\n\n                    let params = {\n                        source: this.camConfig.source,\n                        codec: codec,\n                        fps: fps,\n                        width: width,\n                        height: height,\n                        bitrate: bitrate,\n                        payloadtype: request.video.pt ?? 99,\n                        videokey: sessionInfo.videoSRTP?.toString('base64'),\n                        targetAddress: sessionInfo.address,\n                        targetVideoPort: sessionInfo.videoPort,\n                        targetVideoSsrc: sessionInfo.videoSSRC,\n                        mtu,\n                    };\n\n                    let ffmpegCommand = this.camConfig.ffmpegCommandLine.stream.map((s) => s.replace(/\\$\\{(.*?)\\}/g, (_, word) => params[word]));\n\n                    if (this.camConfig.enableAudio && request.audio != null) {\n                        let params = {\n                            source: this.camConfig.source,\n                            bitrate: request.audio.max_bit_rate ?? 16,\n                            samplerate: request.audio.sample_rate ?? 16,\n                            channel: request.audio.channel ?? 1,\n                            payloadtype: request.audio.pt ?? 110,\n                            targetAddress: sessionInfo.address,\n                            targetAudioPort: sessionInfo.audioPort,\n                            targetAudioSsrc: sessionInfo.audioSSRC,\n                            audiokey: sessionInfo.audioSRTP?.toString('base64'),\n                        };\n\n                        ffmpegCommand = ffmpegCommand.concat(this.camConfig.ffmpegCommandLine.streamAudio.map((s) => s.replace(/\\$\\{(.*?)\\}/g, (_, word) => params[word])));\n                    }\n\n                    // this.FLogger.debug(\"Stream run: ffmpeg \" + ffmpegCommand.join(' '));\n                    let ffmpeg = spawn('ffmpeg', ffmpegCommand, { env: process.env });\n\n                    let started = false;\n                    ffmpeg.stderr.on('data', (data: Buffer) => {\n                        if (!started) {\n                            started = true;\n                            this.FLogger.debug('FFMPEG: received first frame');\n                            callback(); // do not forget to execute callback once set up\n                        }\n                        //this.FLogger.debug(\"FFMPEG:\" + data.toString('utf8'));\n                    });\n                    ffmpeg.on('error', (error) => {\n                        this.FLogger.error('[Video] Failed to start video stream: ' + error.message);\n                        callback(new Error('ffmpeg process creation failed!'));\n                    });\n                    ffmpeg.on('exit', (code, signal) => {\n                        const message = '[Video] ffmpeg exited with code: ' + code + ' and signal: ' + signal;\n\n                        if (code == null || code === 255) {\n                            this.FLogger.debug(message + ' (Video stream stopped!)');\n                        } else {\n                            this.FLogger.error(message + ' (error)');\n\n                            if (!started) {\n                                callback(new Error(message));\n                            } else {\n                                this.cameraController.forceStopStreamingSession(sessionId);\n                            }\n                        }\n                    });\n\n                    this.ongoingSessions[sessionId] = {\n                        localVideoPort: 0,\n                        process: ffmpeg,\n                    };\n                    delete this.pendingSessions[sessionId];\n\n                    break;\n                }\n            }\n\n            case StreamRequestTypes.RECONFIGURE:\n                callback();\n                break;\n            case StreamRequestTypes.STOP:\n                this.stopStreaming(sessionId);\n                callback();\n                break;\n        }\n    }\n\n    private stopStreaming(sessionId: string) {\n        const ongoingSession = this.ongoingSessions[sessionId];\n        try {\n            ongoingSession.process.kill('SIGKILL');\n        } catch (e) {\n            this.FLogger.error('Error occurred terminating the video process!');\n            this.FLogger.error(e);\n        }\n\n        delete this.ongoingSessions[sessionId];\n\n        this.FLogger.debug('Stopped streaming session!');\n    }\n}\n","/// <reference path=\"./typings/index.d.ts\" />\nimport { Configuration } from './shared/yahka.configuration';\nimport { Accessory, Characteristic, Service } from 'hap-nodejs';\nimport { IHasIHomeKitBridgeBinding, IHomeKitBridgeBindingFactory, ILogger, IHomeKitBridgeBinding } from './yahka.interfaces';\n\ntype IHAPCharacteristic = Characteristic & IHasIHomeKitBridgeBinding;\n\nexport class YahkaServiceInitializer {\n\n    constructor(private FBridgeFactory: IHomeKitBridgeBindingFactory, private FLogger: ILogger) {\n\n    }\n    public initServices(hapDevice: Accessory, serviceConfigs: Configuration.IServiceConfig[]) {\n        if (serviceConfigs == null) {\n            return;\n        }\n\n        for (const service of serviceConfigs) {\n            this.initService(hapDevice, service);\n        }\n\n        for (const service of serviceConfigs) {\n            this.establishServiceLinks(hapDevice, service);\n        }\n    }\n\n    private initService(hapDevice: Accessory, serviceConfig: Configuration.IServiceConfig) {\n        if (serviceConfig.enabled === false) {\n            this.FLogger.debug(`[${hapDevice.displayName}] service ${serviceConfig.name} is disabled`);\n            return;\n        }\n\n        if (!(serviceConfig.type in Service)) {\n            throw Error(`[${hapDevice.displayName}] unknown service type: ${serviceConfig.type}`);\n        }\n\n        this.FLogger.debug(`[${hapDevice.displayName}] adding Service ${serviceConfig.name}`);\n\n        let isNew = false;\n        let hapService = hapDevice.getService(Service[serviceConfig.type]);\n        if (hapService !== undefined) {\n            const existingSubType = hapService.subtype ? hapService.subtype : \"\"\n            if (existingSubType != serviceConfig.subType)\n                hapService = undefined;\n        }\n\n        if (hapService === undefined) {\n            hapService = new Service[serviceConfig.type](serviceConfig.name, serviceConfig.subType);\n            isNew = true;\n        }\n\n        if (serviceConfig.isHidden != null) {\n            hapService.setHiddenService(serviceConfig.isHidden);\n        }\n\n        if (serviceConfig.isPrimary != null) {\n            hapService.setPrimaryService(serviceConfig.isPrimary);\n        }\n\n        for (let charactConfig of serviceConfig.characteristics) {\n            this.initCharacteristic(hapService, charactConfig);\n        }\n\n        if (isNew) {\n            hapDevice.addService(hapService);\n        }\n    }\n\n    private establishServiceLinks(hapDevice: Accessory, serviceConfig: Configuration.IServiceConfig) {\n        if (serviceConfig.enabled == false) {\n            return\n        }\n        if (serviceConfig.linkTo == null) {\n            return;\n        }\n        if (serviceConfig.linkTo == '') {\n            return;\n        }\n\n        const existingService = hapDevice.getService(serviceConfig.name);\n        const linkToService = hapDevice.getService(serviceConfig.linkTo);\n        if (existingService == null || linkToService == null) {\n            this.FLogger.error(`[${serviceConfig.name}] unable to establish link between ${serviceConfig.linkTo} and ${serviceConfig.name} - one of the services was not found or is disabled`);\n            return;\n        }\n        linkToService.addLinkedService(existingService);\n        this.FLogger.debug(`[${serviceConfig.name}] established link from ${existingService.displayName} to ${linkToService.displayName}`);\n    }\n\n\n    private initCharacteristic(hapService: Service, characteristicConfig: Configuration.ICharacteristicConfig) {\n        const logName = `[${hapService.displayName}.${characteristicConfig.name}]`;\n        if (!characteristicConfig.enabled) {\n            return;\n        }\n\n        let hapCharacteristic = hapService.getCharacteristic(Characteristic[characteristicConfig.name]) as IHAPCharacteristic;\n        if (!hapCharacteristic) {\n            this.FLogger.warn(`${logName} unknown characteristic: ${characteristicConfig.name}`);\n            return;\n        }\n\n        if (characteristicConfig.properties !== undefined)\n            hapCharacteristic.setProps(characteristicConfig.properties);\n\n        hapCharacteristic.binding = this.FBridgeFactory.CreateBinding(characteristicConfig, (plainIOValue: any) => {\n            this.FLogger.debug(`${logName} got a change notify event, ioValue: ${JSON.stringify(plainIOValue)}`);\n            let binding: IHomeKitBridgeBinding = hapCharacteristic.binding;\n            if (!binding) {\n                this.FLogger.error(`${logName} no binding!`);\n                return;\n            }\n\n            let hkValue = binding.conversion.toHomeKit(plainIOValue);\n            this.FLogger.debug(`${logName} forwarding value from ioBroker (${JSON.stringify(plainIOValue)}) to homekit as (${JSON.stringify(hkValue)})`);\n            try {\n                hapCharacteristic.setValue(hkValue, binding);\n            } catch (e) {\n                this.FLogger.error(`${logName} error while setting value ${hkValue} - message: ${e}`);\n            }\n        });\n\n        this.getValueFromIOBroker(hapCharacteristic.binding, (error, ioValue, hkValue) => {\n            this.FLogger.debug(`${logName} initializing homekit with value from ioBroker(${JSON.stringify(ioValue)}) to homekit as (${JSON.stringify(hkValue)})`);\n            try {\n                hapCharacteristic.setValue(hkValue, hapCharacteristic.binding);\n            } catch (e) {\n                this.FLogger.error(`${logName} error while setting value ${hkValue} - message: ${e}`);\n            }\n        });\n\n        hapCharacteristic.on('set', (hkValue: any, callback: () => void, context: any) => {\n            this.FLogger.debug(`${logName} got a set event, hkValue: ${JSON.stringify(hkValue)} `);\n            let binding: IHomeKitBridgeBinding = hapCharacteristic.binding;\n            if (!binding) {\n                this.FLogger.error(`${logName} no binding!`);\n                callback();\n                return;\n            }\n\n            if (context === binding) {\n                this.FLogger.debug(`${logName} set was initiated from ioBroker - exiting here`);\n                callback();\n                return;\n            }\n\n            let ioValue = binding.conversion.toIOBroker(hkValue);\n            binding.inOut.toIOBroker(ioValue, () => {\n                this.FLogger.debug(`${logName} set was accepted by ioBroker(value: ${JSON.stringify(ioValue)})`);\n                callback();\n            });\n        });\n\n        hapCharacteristic.on('get', (hkCallback) => {\n            this.FLogger.debug(`${logName} got a get event`);\n            this.getValueFromIOBroker(hapCharacteristic.binding, (error, ioValue, hkValue) => {\n                this.FLogger.debug(`${logName} forwarding value from ioBroker(${JSON.stringify(ioValue)}) to homekit as (${JSON.stringify(hkValue)})`);\n                try {\n                    hkCallback(error, hkValue);\n                } catch (e) {\n                    this.FLogger.error(`${logName} error while setting value ${hkValue} - message: ${e}`);\n                }\n            });\n        });\n    }\n\n    private getValueFromIOBroker(binding: IHomeKitBridgeBinding, callback: (error: any, ioValue: any, hkValue: string | number | undefined) => void) {\n        if (!binding) {\n            callback('no binding', null, null);\n            return;\n        }\n\n        binding.inOut.fromIOBroker((ioBrokerError, ioValue) => {\n            let hkValue = binding.conversion.toHomeKit(ioValue);\n            // check if the value can be converetd to a number\n            if ((hkValue !== undefined) && (hkValue !== \"\")) {\n                let numValue = Number(hkValue);\n                if (!isNaN(numValue)) {\n                    hkValue = numValue;\n                }\n            }\n            callback(ioBrokerError, ioValue, hkValue);\n        });\n    }\n}","/// <reference path=\"./typings/index.d.ts\" />\nimport { THomeKitIPCamera } from './yahka.homekit-ipcamera';\nimport { Configuration } from './shared/yahka.configuration';\nimport { functionFactory } from './yahka.functions/functions.factory';\nimport { IHomeKitBridgeBinding, IHomeKitBridgeBindingFactory, IInOutChangeNotify } from './yahka.interfaces';\nimport { THomeKitBridge, initHAP, deinitHAP } from './yahka.homekit-bridge';\n\n\nexport type TSubscriptionType = 'state' | 'object';\n\nexport interface ISubscriptionRequest {\n    subscriptionType: TSubscriptionType;\n    subscriptionIdentifier: string;\n    subscriptionEvent: (ioValue: any, callback: IInOutChangeNotify) => void;\n}\nexport interface ISubscriptionRequestor {\n    subscriptionRequests: ISubscriptionRequest[];\n}\n\nfunction isSubscriptionRequestor(param: Object): param is ISubscriptionRequestor {\n    return param[\"subscriptionRequests\"] !== undefined &&\n        param[\"subscriptionRequests\"] instanceof Array;\n}\ninterface ICustomCharacteristicConfig extends Configuration.ICharacteristicConfig {\n    conversionFunction?: string;\n    conversionParameters?: any;\n    inOutFunction?: string;\n    inOutParameters?: any;\n}\n\nfunction isCustomCharacteristicConfig(config: Configuration.ICharacteristicConfig): config is ICustomCharacteristicConfig {\n    if (!config)\n        return false;\n    let myConfig = <ICustomCharacteristicConfig>config;\n    return (myConfig.inOutFunction !== undefined) || (myConfig.conversionFunction !== undefined) || (myConfig.inOutParameters !== undefined);\n}\n\nexport class TIOBrokerAdapter implements IHomeKitBridgeBindingFactory {\n    stateToEventMap: Map<string, IInOutChangeNotify[]> = new Map<string, IInOutChangeNotify[]>();\n    objectToEventMap: Map<string, IInOutChangeNotify[]> = new Map<string, IInOutChangeNotify[]>();\n    devices: Array<THomeKitBridge | THomeKitIPCamera> = [];\n    verboseHAPLogging: boolean = false;\n\n    constructor(private adapter: ioBroker.Adapter, private controllerPath) {\n        adapter.on('ready', this.adapterReady.bind(this));\n        adapter.on('stateChange', this.handleState.bind(this));\n        adapter.on('message', this.handleMessage.bind(this));\n        adapter.on('unload', this.handleUnload.bind(this));\n    }\n\n    private adapterReady() {\n        initHAP(this.controllerPath + '/' + this.adapter.systemConfig.dataDir + this.adapter.name + '.' + this.adapter.instance + '.hapdata', this.handleHAPLogEvent.bind(this));\n\n        this.adapter.log.info('adapter ready, checking config');\n        let config = this.adapter.config;\n        this.createHomeKitBridges(config);\n        this.createCameraDevices(config);\n    }\n\n    private createHomeKitBridges(config: any) {\n        let bridgeConfig: Configuration.IBridgeConfig = config.bridge;\n        if (!config.firstTimeInitialized) {\n            this.adapter.log.info('first time initialization');\n            this.adapter.log.debug('system config:' + JSON.stringify(this.adapter.systemConfig));\n\n            bridgeConfig.ident = \"Yahka-\" + this.adapter.instance;\n            bridgeConfig.name = bridgeConfig.ident;\n            bridgeConfig.serial = bridgeConfig.ident;\n            let usr = [];\n            for (let i = 0; i < 6; i++)\n                usr[i] = ('00' + (Math.floor((Math.random() * 256)).toString(16))).substr(-2);\n            bridgeConfig.username = usr.join(':');\n            bridgeConfig.pincode = '123-45-678';\n            bridgeConfig.port = 0;\n            bridgeConfig.verboseLogging = false;\n            config.firstTimeInitialized = true;\n            this.adapter.extendForeignObject('system.adapter.' + this.adapter.name + '.' + this.adapter.instance, { native: config }, undefined);\n        }\n        this.verboseHAPLogging = bridgeConfig.verboseLogging == true;\n\n        this.adapter.log.debug('creating bridge');\n        this.devices.push(new THomeKitBridge(config.bridge, this, this.adapter.log));\n    }\n\n    private createCameraDevices(config: any) {\n        let cameraArray: Array<Configuration.ICameraConfig> = config.cameras;\n        if (cameraArray === undefined)\n            return;\n\n        for (let cameraConfig of cameraArray) {\n            this.adapter.log.debug('creating camera');\n            this.devices.push(new THomeKitIPCamera(cameraConfig, this, this.adapter.log));\n        }\n    }\n\n    private handleHAPLogEvent(message) {\n        if (this.verboseHAPLogging) {\n            console.log(\"HAP debug message\", message);\n            this.adapter.log.debug(\"HAP debug message: \" + message);\n        }\n    }\n\n    private handleState(id: string, state: ioBroker.State) {\n        // Warning, state can be null if it was deleted\n        let notifyArray = this.stateToEventMap.get(id);\n        if (!notifyArray) {\n            //this.adapter.log.debug('nobody subscribed for this state');\n            return;\n        }\n        this.adapter.log.debug('got a stateChange for [' + id + ']');\n\n        // try to convert it to a number\n        convertStateValueToNumber(state);\n\n        for (let method of notifyArray)\n            method(state);\n    }\n\n    private handleMessage(obj: any) {\n        if (typeof obj === 'object' && obj.message) {\n            if (obj.command === 'send') {\n                // Send response in callback if required\n                if (obj.callback)\n                    this.adapter.sendTo(obj.from, obj.command, 'Message received', obj.callback);\n            }\n        }\n    }\n\n    private handleUnload(callback) {\n        try {\n            this.adapter.log.info('cleaning up ...');\n            deinitHAP();\n            this.adapter.log.info('cleaned up ...');\n            callback();\n        } catch (e) {\n            callback();\n        }\n    }\n\n    private handleInOutSubscriptionRequest(requestor: ISubscriptionRequestor, changeNotify: IInOutChangeNotify) {\n        if (requestor.subscriptionRequests.length == 0)\n            return;\n\n        for (let subscriptionRequest of requestor.subscriptionRequests) {\n            let changeInterceptor = (ioValue: any) => subscriptionRequest.subscriptionEvent(ioValue, changeNotify);\n\n\n            if (subscriptionRequest.subscriptionType === 'state') {\n                let existingArray = this.stateToEventMap.get(subscriptionRequest.subscriptionIdentifier);\n                if (!existingArray) {\n                    existingArray = [changeInterceptor];\n                    this.stateToEventMap.set(subscriptionRequest.subscriptionIdentifier, existingArray);\n                } else\n                    existingArray.push(changeInterceptor);\n\n                this.adapter.subscribeForeignStates(subscriptionRequest.subscriptionIdentifier);\n                this.adapter.log.debug('added subscription for: [' + subscriptionRequest.subscriptionType + ']' + subscriptionRequest.subscriptionIdentifier);\n                this.adapter.getForeignState(subscriptionRequest.subscriptionIdentifier, (_, value) => {\n                    convertStateValueToNumber(value);\n                    changeInterceptor(value)\n                });\n            } else {\n                this.adapter.log.warn('unknown subscription type: ' + subscriptionRequest.subscriptionType);\n            }\n        }\n\n    }\n\n    public CreateBinding(characteristicConfig: Configuration.ICharacteristicConfig, changeNotify: IInOutChangeNotify): IHomeKitBridgeBinding {\n        if (isCustomCharacteristicConfig(characteristicConfig)) {\n            let inoutFunc = functionFactory.createInOutFunction(this.adapter, characteristicConfig.inOutFunction, characteristicConfig.inOutParameters);\n            if (inoutFunc === undefined) {\n                this.adapter.log.error('[' + characteristicConfig.name + '] could not create inout-function: ' + characteristicConfig.inOutFunction + ' with params: ' + JSON.stringify(characteristicConfig.inOutParameters));\n                return undefined;\n            }\n\n            let convFunc = functionFactory.createConversionFunction(this.adapter, characteristicConfig.conversionFunction, characteristicConfig.conversionParameters);\n            if (convFunc === undefined) {\n                this.adapter.log.error('[' + characteristicConfig.name + '] could not create conversion-function: ' + characteristicConfig.conversionFunction + ' with params: ' + JSON.stringify(characteristicConfig.conversionParameters));\n                return undefined;\n            }\n\n            if (isSubscriptionRequestor(inoutFunc)) {\n                this.handleInOutSubscriptionRequest(inoutFunc, changeNotify);\n            }\n\n            return {\n                conversion: convFunc,\n                inOut: inoutFunc\n            }\n        }\n        return null;\n    }\n}\n\nfunction convertStateValueToNumber(state: ioBroker.State) {\n    if ((state?.val != null)) {\n        let numValue = Number(state.val);\n        if (!isNaN(numValue)) {\n            state.val = numValue;\n        }\n    }\n}\n","module.exports = require(\"@iobroker/adapter-core\");","module.exports = require(\"debug\");","module.exports = require(\"hap-nodejs\");","module.exports = require(\"util\");","module.exports = require(\"child_process\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./main.ts\");\n",""],"names":[],"sourceRoot":""}